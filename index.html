<!DOCTYPE TML>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>侦探档案馆 - 剧本杀 (TTS旁白增强完整版)</title>
    
    <style>
        /* ===================================================================
           CSS 样式 (基于原文件微调：增加边框和高亮，解决单调问题)
           =================================================================== */
        
        :root {
            /* 颜色变量 - 保持不变 */
            --color-bg-dark: #121212;
            --color-bg-medium: #1e1e1e;
            --color-bg-light: #2a2a2a;
            --color-border: #444;
            --color-text-primary: #e0e0e0;
            --color-text-secondary: #aaa;
            --color-accent: #DAA520; /* 深金色 */
            --color-accent-hover: #FFD700; /* 纯金色 */
            --color-danger: #e74c3c;
            --color-info: #79c9f7;
            --border-radius: 6px;
        }
        
        * {
            box-sizing: border-box; 
        }
        
        body {
            overflow-x: hidden; 
            background-color: var(--color-bg-dark);
            color: var(--color-text-primary);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        #app-container {
            width: 100%;
            max-width: 1000px;
            background-color: var(--color-bg-medium);
            box-shadow: 0 0 25px rgba(0, 0, 0, 0.6);
            padding-bottom: 20px;
            transition: all 0.3s ease;
        }
        
        /* 顶部栏 */
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px; 
            background-color: var(--color-bg-light);
            border-bottom: 2px solid var(--color-accent); /* 修改：底部增加金色边框 */
            position: sticky;
            top: 0;
            z-index: 101; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.5); /* 修改：增加阴影 */
        }

        .app-title {
            font-size: 1.4em; 
            font-weight: bold;
            color: var(--color-accent);
            text-shadow: 0 0 5px rgba(218, 165, 32, 0.3); /* 修改：增加文字发光 */
        }

        .menu-btn {
            background-color: var(--color-bg-dark); /* 修改：加深背景 */
            color: var(--color-accent); /* 修改：文字金色 */
            border: 1px solid var(--color-accent); /* 修改：增加金色边框 */
            padding: 6px 10px; 
            margin-left: 5px;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-size: 0.8em; 
            transition: all 0.2s;
        }

        .menu-btn:hover {
            background-color: var(--color-accent);
            color: var(--color-bg-dark);
        }

        .menu-btn-tts.tts-on {
            background-color: var(--color-accent);
            color: var(--color-bg-dark);
            font-weight: bold;
            box-shadow: 0 0 8px var(--color-accent); /* 修改：开启状态发光 */
        }
        
        /* 常驻 UI */
        #persistent-ui-wrapper {
            padding: 10px 15px 0 15px; 
            display: flex; 
            gap: 15px; 
            flex-wrap: wrap; 
            background-color: var(--color-bg-medium);
            border-bottom: 1px solid var(--color-border);
            position: sticky;
            top: 48px; 
            z-index: 100; 
            transition: opacity 0.3s ease, transform 0.3s ease; 
        }
        
        #role-card-wrapper, #notes-wrapper {
            flex: 1 1 45%; 
            min-width: 300px;
            margin-bottom: 15px;
        }
        
        #constant-role-display {
            background-color: var(--color-bg-light);
            padding: 15px;
            border-radius: var(--border-radius);
            border: 1px solid var(--color-accent); /* 修改：保留金色边框 */
            box-shadow: 0 0 10px rgba(218, 165, 32, 0.1); /* 修改：增加微弱金光 */
            height: 100%; 
            box-sizing: border-box;
        }

        #constant-role-display h3 {
            color: var(--color-accent);
            border-bottom: 1px dashed var(--color-border);
            padding-bottom: 5px;
            margin-top: 0;
            font-size: 1.1em;
        }
        
        #constant-role-display p {
            margin: 8px 0;
            font-size: 0.9em;
            line-height: 1.4;
        }

        .role-task {
            color: var(--color-info); 
        }
        
        /* 笔记样式 */
        #notes-container {
            background-color: var(--color-bg-light);
            border-radius: var(--border-radius);
            border: 1px solid var(--color-info); /* 修改：使用蓝色边框区分笔记 */
            transition: height 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        #notes-header {
            padding: 10px 15px;
            background-color: rgba(121, 201, 247, 0.1); /* 修改：微蓝背景 */
            color: var(--color-info);
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            border-radius: var(--border-radius) var(--border-radius) 0 0;
            border-bottom: 1px solid var(--color-info);
            font-weight: bold;
        }
        
        #notes-content {
            overflow: hidden;
            height: 200px; 
            transition: height 0.3s ease;
        }

        #notes-container.collapsed #notes-content {
            height: 0;
            padding: 0;
            border: none;
        }
        
        #toggle-notes-btn {
            transition: transform 0.3s ease;
        }

        #notes-container.collapsed #toggle-notes-btn {
            transform: rotate(-90deg);
        }

        #note-textarea {
            width: 100%;
            box-sizing: border-box;
            height: 200px;
            padding: 10px;
            border: none; 
            background-color: var(--color-bg-medium);
            color: var(--color-text-primary);
            resize: vertical;
            font-family: inherit;
            font-size: 1em;
            border-radius: 0 0 4px 4px;
        }
        
        /* 场景内容区 */
        #game-content {
            padding: 0 20px;
            overflow: hidden; 
        }

        .scene {
            padding: 20px 0; 
            display: none;
            min-height: 500px;
            opacity: 0;
            animation: fadeIn 0.5s forwards;
        }

        .scene.active {
            display: block;
            opacity: 1;
        }

        .scene-title {
            color: var(--color-accent-hover);
            text-align: center;
            font-size: 2em;
            margin-bottom: 30px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }

        /* 案件选择列表 */
        .case-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .case-card {
            background-color: var(--color-bg-light);
            padding: 20px;
            border-radius: var(--border-radius);
            border: 1px solid var(--color-accent); /* 修改：全包围金色边框 */
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.2); /* 修改：增加阴影 */
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s, background-color 0.2s;
            position: relative;
            overflow: hidden;
        }

        .case-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; width: 4px; height: 100%;
            background-color: var(--color-accent); /* 左侧加粗金条 */
        }

        .case-card:hover {
            transform: translateY(-3px);
            background-color: #333;
            box-shadow: 0 0 15px rgba(218, 165, 32, 0.3); /* 修改：悬停发光 */
        }
        
        .case-tags {
            color: var(--color-accent); /* 修改：标签颜色更亮 */
            font-size: 0.9em;
            margin: 5px 0 10px 0;
            font-weight: bold;
        }
        
        /* 按钮样式 */
        .action-btn, .confirm-button {
            display: block;
            width: 100%;
            padding: 12px 20px;
            margin-top: 20px;
            background-color: var(--color-accent);
            color: var(--color-bg-dark);
            border: none;
            border-radius: var(--border-radius);
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: bold;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3); /* 修改：增加立体感 */
        }

        .action-btn:hover, .confirm-button:hover {
            background-color: var(--color-accent-hover);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(218, 165, 32, 0.2);
        }

        /* 角色输入区 */
        .role-input-box {
            background-color: var(--color-bg-light);
            padding: 25px;
            border-radius: var(--border-radius);
            border: 1px solid var(--color-border); /* 修改：增加边框 */
            box-shadow: 0 4px 15px rgba(0,0,0,0.3); /* 修改：增加阴影 */
        }

        #role-name-input {
            width: 80%; 
            padding: 12px;
            border: 1px solid var(--color-accent); /* 修改：输入框金色边框 */
            border-radius: 4px;
            background-color: var(--color-bg-medium);
            color: var(--color-text-primary);
            font-size: 1em;
            margin-top: 10px;
        }
        
        .role-script-area {
            margin-top: 20px;
            padding: 20px;
            border: 2px solid var(--color-accent); /* 修改：剧本框加粗金色 */
            border-radius: var(--border-radius);
            background-color: #1a1a1a;
            position: relative;
        }
        
        .role-script-area p span {
            color: var(--color-info);
            font-style: italic;
        }
        
        /* 叙事场景 */
        .scene-image-container {
            text-align: center;
            margin-bottom: 20px;
            border: 1px solid var(--color-border); /* 修改：图片加框 */
            padding: 5px;
            border-radius: var(--border-radius);
            background-color: var(--color-bg-light);
        }

        .scene-image {
            max-width: 100%;
            height: auto;
            max-height: 350px;
            border-radius: 4px;
            object-fit: cover;
        }

        .narrative-box {
            background-color: var(--color-bg-light);
            padding: 25px;
            border-radius: var(--border-radius);
            line-height: 1.8;
            font-size: 1.1em;
            border-left: 5px solid var(--color-info);
            border-right: 1px solid var(--color-border); /* 修改：增加右下边框使其更像卡片 */
            border-bottom: 1px solid var(--color-border);
            border-top: 1px solid var(--color-border);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        /* 线索列表 */
        .clue-item {
            background-color: var(--color-bg-light);
            padding: 15px;
            margin-bottom: 15px;
            border-radius: var(--border-radius);
            border-left: 5px solid var(--color-danger);
            border-top: 1px solid var(--color-border); /* 修改：增加边框 */
            border-right: 1px solid var(--color-border);
            border-bottom: 1px solid var(--color-border);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); /* 修改：增加阴影 */
            transition: transform 0.2s;
        }
        
        .clue-item:hover {
            transform: translateX(5px); /* 修改：悬停动效 */
        }

        .clue-item h3 {
            color: var(--color-danger);
            margin-top: 0;
            font-size: 1.1em;
            border-bottom: 1px solid rgba(231, 76, 60, 0.3); /* 修改：标题下划线 */
            padding-bottom: 5px;
            margin-bottom: 10px;
        }
        
        /* 模态框 */
        .modal {
            display: none;
            position: fixed;
            z-index: 102; 
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.8);
        }

        .modal-content {
            background-color: var(--color-bg-medium);
            margin: 15% auto; 
            padding: 25px;
            border: 2px solid var(--color-accent); /* 修改：金色边框 */
            width: 80%;
            max-width: 400px;
            border-radius: var(--border-radius);
            box-shadow: 0 0 20px rgba(218, 165, 32, 0.2);
        }

        .close-btn {
            color: var(--color-text-secondary);
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close-btn:hover,
        .close-btn:focus {
            color: var(--color-accent);
            text-decoration: none;
            cursor: pointer;
        }
        
        /* 指认列表中的按钮样式 */
        #role-list-for-accusation .menu-btn {
            background-color: var(--color-danger);
            color: white;
            border: 1px solid var(--color-danger);
            font-size: 1em;
            margin-top: 0;
        }

        #role-list-for-accusation .menu-btn:hover {
            background-color: #c0392b;
            color: white;
        }
        
        /* 动画 */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* 移动端优化 */
        @media (max-width: 768px) {
            #app-container { max-width: 100%; }
            #game-content { padding: 0 10px; }
            .case-list {
                display: flex !important;
                flex-direction: column !important;
                gap: 15px;
                padding: 0;
            }
            .case-card { width: 100%; }
            #persistent-ui-wrapper {
                flex-direction: column;
                gap: 10px;
                padding: 10px 10px 0 10px; 
                top: 45px; 
            }
            #role-card-wrapper, #notes-wrapper {
                min-width: 100%;
                flex-basis: 100%;
                margin-bottom: 10px;
            }
            .scene { padding: 15px 0; min-height: 400px; }
            .top-bar { padding: 8px 10px; }
            #constant-role-display p { font-size: 0.8em; margin: 3px 0; }
            .narrative-box { padding: 15px; font-size: 1em; }
            .action-btn, .confirm-button { padding: 10px 15px; font-size: 1em; }
        }
    </style>
</head>
<body>
    <div id="app-container">
        
        <header class="top-bar">
            <span class="app-title">🕵️ 侦探档案馆</span>
            <div class="menu-controls">
                <button id="tts-toggle" class="menu-btn menu-btn-tts">🔊 TTS: 关</button> 
                <button id="menu-btn" class="menu-btn">📋 菜单</button>
            </div>
        </header>

        <div id="persistent-ui-wrapper" style="display: none;">
            
            <div id="role-card-wrapper">
                <div id="constant-role-display" style="display: none;">
                    <h3>🎭 你的剧本卡</h3>
                    <p id="constant-role-name"><strong>角色:</strong> 待加载</p>
                    <p id="constant-role-secret"><strong>秘密:</strong> 待加载</p>
                    <p id="constant-role-task" class="role-task"><strong>任务:</strong> 待加载</p>
                </div>
            </div>
            
            <div id="notes-wrapper">
                <div id="notes-container" class="collapsed">
                    <div id="notes-header">
                        <span>📝 我的推理笔记 (自动保存)</span>
                        <span id="toggle-notes-btn">▼</span>
                    </div>
                    <div id="notes-content">
                        <textarea id="note-textarea" placeholder="在这里写下你的线索、时间线和推理思路..."></textarea>
                    </div>
                </div>
            </div>
            
        </div>
        <main id="game-content">
            <div id="scene-case-select" class="scene active">
                <h1 class="scene-title">选择今日案件 (共 20 个完整剧本)</h1> 
                <div class="case-list" id="case-list-container">
                    </div>
            </div>

            <div id="scene-role-select" class="scene">
                <div class="role-input-box">
                    <h2>你的角色剧本</h2>
                    <p>请**输入你被分配到的角色名**，查看你的秘密。</p>
                    <p id="role-name-options">可输入角色名: 待加载...</p>
                    
                    <input type="text" id="role-name-input" placeholder="输入角色名">
                    <button id="confirm-role-btn" class="confirm-button">确认</button>
                    
                    <div id="role-script-display" class="role-script-area">
                        </div>
                </div>
            </div>

            <div id="scene-narrative" class="scene">
                <div class="scene-image-container">
                    <img id="scene-main-image" class="scene-image" src="" alt="场景插图占位符">
                </div>
                
                <div class="narrative-box">
                    <p id="narrative-text" class="narrative-text">【旁白】故事将在这里展开...</p>
                </div>
                
                <button id="continue-story-btn" class="action-btn">继续故事 ▶</button>
            </div>

            <div id="scene-clues" class="scene">
                <h2 class="clue-title">🔍 搜证阶段: 线索列表</h2>
                <p id="clue-stage-info" style="text-align: center; color: var(--color-text-secondary); margin-bottom: 20px;">本次搜证有 0 条线索。</p>
                
                <div id="clue-list-container">
                    </div>
                
                <button id="finish-clues-btn" class="action-btn">结束搜证，进入下一轮讨论</button>
            </div>
            
            <div id="scene-select-accusation" class="scene">
                <h2 class="scene-title">🔪 最终指认阶段</h2>
                <p style="text-align: center;">【主持人】请大家给出最终指认！请在下方列表选择你的嫌疑人进行指认。</p>
                
                <div id="accusation-list-container" style="margin: 20px 0; padding: 15px; border: 1px dashed var(--color-danger); border-radius: var(--border-radius);">
                    <h3>嫌疑人列表 (指认目标)</h3>
                    <div id="role-list-for-accusation" style="display: flex; flex-wrap: wrap; gap: 10px;">
                        </div>
                </div>
                
                <button id="confirm-accusation-btn" class="action-btn">确认指认，揭晓真相 ▶</button>
            </div>
            <div id="scene-reveal" class="scene">
                <h2 class="scene-title">身份揭晓 · 传闻模式</h2>
                <p>【主持人】现在，我们来揭开案件的真相。</p>
                
                <div class="reveal-content">
                    <p id="final-reveal-text" style="background-color: var(--color-bg-light); padding: 20px; border-radius: var(--border-radius); line-height: 1.8;">
                        **案件真相：**
                        <br>
                        <span id="truth-display" style="color: var(--color-accent);">（真相在此处揭晓）</span>
                    </p>
                </div>
                <button class="action-btn" onclick="goToScene('scene-case-select')">返回案件选择</button>
            </div>

        </main>
    </div>
    
    <div id="menu-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn" id="close-menu">&times;</span>
            <h2>📋 游戏菜单</h2>
            <p>这里可以放置游戏的设置和退出选项。</p>
            <button class="confirm-button" onclick="goToScene('scene-case-select'); document.getElementById('menu-modal').style.display='none';">返回案件选择</button>
        </div>
    </div>

    <script>
        // ===================================================================
        // 1. 核心数据 (Data)
        // ===================================================================

        let game = {
            currentCaseId: null,
            currentCaseData: null,
            currentSceneIndex: 0,
            ttsOn: false, 
            roleName: null, // 存储当前玩家的角色名
            currentClueStage: 1
            
        };

        // 注意：原文件有 BASIC_SCENES_TEMPLATE 变量，但新结构中每个剧本自带 scenes，
        // 为了兼容旧逻辑（如果还有用到），保留定义但内容可为空或默认。
        const BASIC_SCENES_TEMPLATE = [
            { type: 'narrative', text: '【旁白】故事开始...' },
            { type: 'select_role' },
            { type: 'clues_stage', stage: 1 },
            { type: 'clues_stage', stage: 2 },
            { type: 'reveal' }
        ];

        const SCENE_IMAGES = {
            '01': '1.jpg', '02': '1.jpg', '03': '1.jpg', '04': '1.jpg','05': '1.jpg', 
            '06': '1.jpg', '07': '1.jpg', '08': '1.jpg','09': '1.jpg', '10': '1.jpg', 
            '11': '1.jpg', '12': '1.jpg', '13': '1.jpg', '14': '1.jpg', '15': '1.jpg',
            '16': '1.jpg', '17': '1.jpg', '18': '1.jpg', '19': '1.jpg', '20': '1.jpg'
        };
        
        const GAME_DATA = {
            "01": {
                title: "未干的雨伞",
                tags: "【经典】【密室】【极难】", 
                description: "在一个暴雨之夜，侦探们被召集到一栋偏远的豪宅。一名男子被发现死于一间反锁的密室，唯一的线索是一把未干的雨伞。",
                roles: {
                    "医生·秦文江": { 
                        identity: "主治医生", 
                        secret: "我昨晚悄悄去过受害者房间，并挪动了现场的一件物品。", 
                        task: "隐藏我去受害者房间的事实，并将焦点引向受害者过去的仇人。",
                        memoir: "【专属回忆】昨晚十点，我听到一声尖叫。因担心受害者遗嘱中的财产分配，我偷偷用我藏匿的备用钥匙进入了他的房间。那时他已经倒地不起，我因担心被误会而迅速离开了，只记得我走时门是反锁的。" 
                    },
                    "管家·王福": { 
                        identity: "资深管家", 
                        secret: "我是唯一知道受害者藏有第二把钥匙的人，但我发誓我没有动它。", 
                        task: "将嫌疑引向医生，因为我痛恨他对受害者财产的贪婪。",
                        memoir: "【专属回忆】十一点半时，我巡视走廊，发现一把昂贵的黑色雨伞被随意放在案发房间的门口，伞面是湿的。这引起了我的警觉，因为受害者从不使用这种伞。" 
                    },
                    "女仆·李香兰": { 
                        identity: "新晋女仆", 
                        secret: "我有一把房间的钥匙，但钥匙在我手中时，受害者已死。", 
                        task: "保护我昨晚偷窃金银首饰的秘密，不被发现。",
                        memoir: "【专属回忆】我在案发后才进入房间，那时我拿走了受害者保险箱里的一枚戒指。我确认房间内部是反锁的。但我很害怕，昨晚我听到一阵奇怪的**金属摩擦声**。"
                    },
                    "律师·周明": { 
                        identity: "遗嘱执行人", 
                        secret: "我昨天下午修改了受害者遗嘱，使得医生·秦文江成为主要受益人。", 
                        task: "证明遗嘱修改的合法性，并确保它不被推翻。",
                        memoir: "【专属回忆】昨晚我一直在书房处理文件，但我偷偷看到管家王福在走廊上似乎捡起了什么东西，并迅速藏了起来。"
                    }
                },
                scenes: [
                    { type: 'narrative', text: "【旁白】**暴风雨中的豪宅。** 一名男子被发现在反锁的房间内死亡，请各位玩家阅读角色剧本。"},
                    { type: 'select_role' },
                    { type: 'narrative', text: "【旁白】**第一轮讨论开始。** 各位可以自由质疑，并阐述自己的不在场证明。" },
                    { type: 'clues_stage', stage: 1 },
                    { type: 'narrative', text: "【旁白】**第二轮讨论开始。** 请根据新的线索卡片，重点分析密室的手法。"},
                    { type: 'clues_stage', stage: 2 },
                    { type: 'select_accusation' }, 
                    { type: 'reveal' }
                ],
                clue_stages: {
                    1: [
                        { title: "现场照片：门窗锁", detail: "房间门从内反锁，窗户紧闭，并用螺丝固定。现场没有搏斗痕迹。", access: "public" }, 
                        { title: "受害者日记碎片", detail: "日记写着：‘我怀疑秦医生在偷偷观察我，他不是个好人，他想要那个东西。’", access: "医生·秦文江" },
                        { title: "一把未干的雨伞", detail: "一把昂贵的黑色雨伞，上面有泥水痕迹，被发现在房间门口。", access: "管家·王福" },
                        { title: "沾有泥土的鞋印", detail: "在房间门口的地毯上，发现了一个沾有泥土的鞋印，尺寸较小，疑似女性。", access: "女仆·李香兰" },
                        { title: "撕毁的纸片", detail: "在壁炉的灰烬中发现了一小片烧焦的纸片，上面似乎是律师事务所的抬头。", access: "律师·周明" }
                    ],
                    2: [
                        { title: "细铁丝", detail: "在医生秦文江的工具箱内发现一根细铁丝，尺寸刚好能通过门缝，但上面有新的划痕。", access: "public" },
                        { title: "受害者遗书", detail: "受害者似乎写过遗书，但内容被撕毁，只能看到‘......为了钥匙，杀了......’，无法确认是被谁撕毁。", access: "public" }
                    ]
                },
                truth: "真凶是**医生·秦文江**。\n\n**动机：** 秦文江是为了夺取受害者手中的秘密文件（藏于保险箱）并确保遗嘱生效。\n\n**手法：** 秦文江在受害者熟睡时，利用**细铁丝**（线索 2-1）或备用钥匙（日记碎片暗示）进入房间，将受害者勒毙。他发现保险箱后，试图用工具打开（女仆的回忆），但未能成功，并在离开时从内部反锁，留下雨伞（线索 1-3）制造有‘外人’进入的假象，误导调查方向。\n\n**女仆的行为：** 女仆·李香兰在医生行凶后用自己的钥匙进入，只为偷窃戒指，她并非凶手，但她的行动制造了不在场证明的混乱。"
            },
            "02": {
                title: "雪山上的红酒渍",
                tags: "【环境】【毒杀】【硬核】",
                description: "在阿尔卑斯山顶的豪华山庄中，一位富豪在品尝红酒后离奇死亡。红酒杯上有一点不寻常的污渍。",
                roles: {
                    "调酒师·陆铭": { identity: "山庄调酒师", secret: "我是死者的私生子，死者拒绝承认我。", task: "将嫌疑引向与死者有商业纠纷的人。" , memoir: "【专属回忆】我曾研究过一种**利用高海拔气压**和**化学温差**引发毒性挥发的办法，但我从未在人类身上试过。昨天我清理酒杯时，发现酒杯底部有一层极薄的冰晶残留。" },
                    "秘书·陈薇": { identity: "死者秘书", secret: "我偷取了死者公司的一笔巨款，必须在他立新遗嘱前让他死亡。", task: "销毁所有涉及款项转移的财务记录。" , memoir: "【专属回忆】案发时，我在房间外等候，听到他痛苦的呻吟，但我没有进去。我看到调酒师从房间出来时，衣袖上似乎沾到了一点红色的东西，他很快擦掉了。" },
                    "保镖·张虎": { identity: "私人保镖", secret: "我爱着秘书陈薇，并被她指使在山庄切断了特定的监控线路。", task: "隐瞒监控线路被切断的事实。" , memoir: "【专属回忆】我的任务是确保山庄的安全。我记得死者昨晚很晚才回来，他手里拿着一个奇怪的**小型金属容器**，他把它藏在了书房的壁炉里。" },
                    "投资人·赵莉": { identity: "商业伙伴", secret: "死者掌握着我商业欺诈的证据，我威胁他却失败了。", task: "让凶手看起来是保镖，因为他看起来最粗暴。" , memoir: "【专属回忆】我昨晚在阳台喝酒，感觉气压有些不稳。我看到保镖在山庄的后门鬼鬼祟祟，似乎在修理什么。那酒渍看起来像是普通的红酒，但颜色过于鲜艳。" }
                },
                scenes: [
                    { type: 'narrative', text: "【旁白】雪山别墅，一起精密的毒杀案。请各位阅读角色剧本。"},
                    { type: 'select_role' },
                    { type: 'narrative', text: "【旁白】**第一轮讨论开始。** 请阐述不在场证明和与死者关系。"},
                    { type: 'clues_stage', stage: 1 },
                    { type: 'narrative', text: "【旁白】**第二轮讨论开始。** 案件的重点在于毒剂的施放机制，请结合环境线索。"},
                    { type: 'clues_stage', stage: 2 },
                    { type: 'select_accusation' }, 
                    { type: 'reveal' }
                ],
                clue_stages: {
                    1: [
                        { title: "死者检验报告", detail: "死者因高纯度氰化物中毒而死。死亡时间在晚上10点至11点之间。", access: "public" }, 
                        { title: "红酒杯残留", detail: "红酒杯内壁有一层极薄的无色冰晶残迹。杯子底部有轻微刮痕。", access: "调酒师·陆铭" },
                        { title: "财务报告", detail: "死者公司近期有一笔约千万的款项被秘密转出，收款方是一个海外账户。", access: "秘书·陈薇" },
                        { title: "烧焦的金属容器", detail: "在书房壁炉里找到一个烧焦的小型金属容器碎片，像是某种压力装置或气雾罐。", access: "保镖·张虎" },
                        { title: "天气记录", detail: "当晚山庄气压在10点15分左右出现异常的波动，持续了约5分钟。", access: "投资人·赵莉" }
                    ],
                    2: [
                        { title: "氰化物残迹", detail: "在调酒师的工作台底部发现微量的氰化物粉末，但调酒师表示他从未使用过此物。", access: "public" },
                        { title: "山顶温差记录", detail: "山顶房间内外温差极大，调酒师曾向山庄订购大量冰块用于“调制鸡尾酒”。", access: "public" }
                    ]
                },
                truth: "真凶是**调酒师·陆铭**。\n\n**动机：** 遗传和财产的纠纷。\n\n**手法：** 陆铭利用他的化学知识，将氰化物制成**特殊的冰晶形态**（线索 1-2），并在调酒时将其放入酒杯底部（线索 1-2）。他利用山顶的**高海拔气压**和**温差**（线索 1-5, 2-2），在受害者喝完酒后，冰晶升华为氰化物气体，毒杀受害者。红酒渍（线索 1-2）是他在酒杯中加入冰晶时，因冰晶融化过快导致红酒溢出沾上的。小型金属容器（线索 1-4）是死者自己带上的气压计，用以检测天气，与案情无关，是干扰项。"
            },
            "03": {
                title: "倒悬的画",
                tags: "【艺术】【连环】【中等】",
                description: "一位著名画家的死因不明，他被发现死在自己的工作室，他最珍视的一幅画被**倒悬**。这似乎是凶手的某种签名。",
                roles: {
                    "经纪人·孙悦": { identity: "画家经纪人", secret: "我与画家存在不正当关系，且画家即将与我断绝关系。", task: "销毁所有能证明我与画家关系的信件。" , memoir: "【专属回忆】我对画家的死感到震惊。我清楚地知道，画家有一个习惯，他在情绪激动时会用力地抓紧手中的东西，并在指甲缝里留下痕迹。我昨晚曾与他在工作室争吵。" },
                    "评论家·冯志": { identity: "艺术评论家", secret: "我私下伪造过画家的几幅画作，正准备高价出售。", task: "保护我的伪造画不被发现。" , memoir: "【专属回忆】昨晚我曾偷偷潜入工作室，想看看画家最近的新作。我看到他的一把**特殊雕刻刀**放在桌子上，那刀具非常锋利，被用于精细雕刻。" },
                    "学徒·林静": { identity: "画家学徒", secret: "我暗恋着画家，并在案发前曾给他送过一杯加了安眠药的咖啡。", task: "隐瞒我投药的事实，因为我只想让他休息，而非死亡。" , memoir: "【专属回忆】我记得画家工作室的窗户是锁着的，但窗户的螺丝似乎**有些松动**。我在投药时，他的状态已经非常虚弱。" },
                    "收藏家·吴海": { identity: "神秘收藏家", secret: "我与画家曾有过一起黑市交易，我用赃物换取了他的画作。", task: "把嫌疑引到任何与画家有情感纠纷的人。" , memoir: "【专属回忆】我在案发后不久到达，发现地上有一个微小的**油画布碎片**，我把它捡起来藏在了我的口袋里，它被切得非常整齐。" }
                },
                scenes: [
                    { type: 'narrative', text: "【旁白】艺术家的工作室，死亡与倒悬的画。"},
                    { type: 'select_role' },
                    { type: 'narrative', text: "【旁白】**第一轮讨论。** 重点：画家的死亡时间和与各人的情感/利益纠纷。"},
                    { type: 'clues_stage', stage: 1 },
                    { type: 'narrative', text: "【旁白】**第二轮讨论。** 思考：倒悬的画是暗示，还是工具？"},
                    { type: 'clues_stage', stage: 2 },
                    { type: 'select_accusation' }, 
                    { type: 'reveal' }
                ],
                clue_stages: {
                    1: [
                        { title: "死者尸检", detail: "死者死于急性失血过多，颈部有一道深而细的切割伤。死亡时间在晚上8点左右。", access: "public" }, 
                        { title: "安眠药残留", detail: "死者血液中有安眠药残留，但不是致死原因。其最后一杯咖啡中也含有安眠药。", access: "学徒·林静" },
                        { title: "倒悬的画作", detail: "画作被倒挂在墙上，固定画框的螺丝似乎有重新拧紧的痕迹。", access: "public" },
                        { title: "指甲缝中的纤维", detail: "在死者指甲缝中发现了一小块来自昂贵西装的纤维。", access: "经纪人·孙悦" },
                        { title: "工作台上的雕刻刀", detail: "一把极为锋利的特殊雕刻刀，刀刃干净，但刀柄上残留着极微小的血液痕迹。", access: "评论家·冯志" }
                    ],
                    2: [
                        { title: "窗户螺丝", detail: "工作室一扇窗户的螺丝被松开后又重新拧紧，松动的痕迹很新。", access: "学徒·林静" },
                        { title: "油画布碎片", detail: "在收藏家身上发现的碎片证实是从倒悬画作的边缘切割下来的。", access: "收藏家·吴海" }
                    ]
                },
                truth: "真凶是**评论家·冯志**。\n\n**动机：** 冯志担心伪造画作被画家发现。\n\n**手法：** 冯志利用学徒投药的机会，在画家昏睡（安眠药线索 1-2）后，用自己的**特殊雕刻刀**（线索 1-5）在画家的颈部造成致命伤。然后，他将画家倒悬在画作上，让画家的身体被画作的重量压迫，以确保失血过多。他切割画作（线索 2-2）并倒挂，既是他的犯罪签名，也是为了在血迹凝固前隐藏刀口。窗户螺丝和女仆的秘密都是干扰项，旨在将焦点引向密室。"
            },
            "04": {
                title: "图书馆幽灵",
                tags: "【校园】【超自然】【情感】",
                description: "在一所古老的大学图书馆里，一名学生在半夜离奇坠楼。传闻图书馆有幽灵，但现场证据显示这是一起谋杀。",
                roles: {
                    "图书管理员·方晓": { identity: "资深管理员", secret: "我曾与死者是恋人关系，但他最近试图公开我们的关系，我为了保住工作拒绝了他。", task: "隐藏我和死者的恋人关系。" , memoir: "【专属回忆】当晚我值班，听到图书馆三楼传来一阵**重物撞击**的声音，我赶到时，死者已经坠楼。我发现了一张他写给我的**情诗**，我把它撕毁藏了起来。" },
                    "哲学系学生·江辰": { identity: "死者室友", secret: "我长期受到死者的霸凌和威胁，我偷偷在图书馆的楼梯扶手上涂抹了一种**透明的油脂**。", task: "让这次死亡看起来是意外滑倒。" , memoir: "【专属回忆】死者是一个狂热的**天文爱好者**，他经常半夜偷偷溜到图书馆顶楼的露台看星星。我看到他留下的望远镜镜头上，有一滴奇怪的、凝固的**淡黄色液体**。" },
                    "历史系教授·周平": { identity: "历史教授", secret: "死者掌握了我剽窃他人论文的证据，他威胁要告发我。", task: "将嫌疑引向图书管理员，因为他们是最后一个见到死者的人。" , memoir: "【专属回忆】我在死者坠楼后不久到达现场。我注意到他掉落的手机屏幕上显示着一条未发送的短信草稿：‘我知道教授的秘密，那东西藏在...’，然后就没有了。" },
                    "物理系学生·赵雨": { identity: "高年级学生", secret: "我偷偷进入过死者的电脑，修改了他的一个实验数据，使其研究项目面临失败。", task: "将焦点引向死者的心理压力，暗示他是自杀。" , memoir: "【专属回忆】我在坠楼现场的角落发现了一个微小的**玻璃碎片**，形状像是一个**实验用的试管残片**。我怀疑这与死者的研究项目有关。" }
                },
                scenes: [
                    { type: 'narrative', text: "【旁白】古老图书馆，学生离奇坠楼。"},
                    { type: 'select_role' },
                    { type: 'narrative', text: "【旁白】**第一轮讨论。** 坠楼是意外还是谋杀？死者是否留下遗言？"},
                    { type: 'clues_stage', stage: 1 },
                    { type: 'narrative', text: "【旁白】**第二轮讨论。** 重点：致命因素是滑倒，还是被推？坠楼发生地是哪里？"},
                    { type: 'clues_stage', stage: 2 },
                    { type: 'select_accusation' }, 
                    { type: 'reveal' }
                ],
                clue_stages: {
                    1: [
                        { title: "死者伤势", detail: "死者头部受到致命撞击，但其手指有明显的**被腐蚀痕迹**，并非跌落造成。", access: "public" }, 
                        { title: "扶手油脂", detail: "楼梯扶手上有透明油脂残留，这种油脂会降低摩擦力。", access: "哲学系学生·江辰" },
                        { title: "手机草稿", detail: "死者手机短信草稿：‘我知道教授的秘密，那东西藏在...’。", access: "历史系教授·周平" },
                        { title: "玻璃碎片", detail: "在现场角落发现一个实验试管的残片，试管内壁残留着淡黄色液体。", access: "物理系学生·赵雨" },
                        { title: "撕碎的情诗", detail: "在管理员的垃圾桶里发现一张被撕碎的情诗，署名是死者。", access: "图书管理员·方晓" }
                    ],
                    2: [
                        { title: "望远镜残留物", detail: "死者望远镜镜头上的淡黄色液体与试管残留物吻合，是一种强酸。", access: "public" },
                        { title: "管理员的报告", detail: "管理员报告中描述的撞击声来自于图书馆三楼的**化学实验室废弃区**，而非坠楼的楼梯。", access: "public" }
                    ]
                },
                truth: "真凶是**哲学系学生·江辰**。\n\n**动机：** 对死者长期霸凌的报复。\n\n**手法：** 江辰知道死者（天文爱好者）会去露台。他提前将**强酸**（线索 2-1）偷偷涂抹在死者的**望远镜**上（线索 1-2）。当死者半夜使用望远镜时，手指被腐蚀，剧痛之下他将望远镜摔在地上（线索 2-2 的撞击声），并试图冲回实验室冲洗。江辰跟上，并在三楼将其推下，伪造成意外坠楼。楼梯上的油脂只是江辰为制造不在场证明的干扰项，但真正的致命伤是强酸和推落。"
            },
            "05": {
                title: "无声的晚餐",
                tags: "【家庭】【慢性毒药】【简单】",
                description: "在一个气氛诡异的家庭晚宴上，一家之主在用餐后陷入昏迷，后抢救无效死亡。所有人都称自己没有出声。",
                roles: {
                    "长子·李强": { identity: "家族企业继承人", secret: "我偷偷篡改了父亲的药物配方，使其对心脏产生不可逆转的损害。", task: "将嫌疑引向佣人，他们负责食物。", memoir: "【专属回忆】我记得父亲在晚餐时喝了一小口**果汁**，他当时皱了一下眉头。我看到桌子底下有一个小小的**白色粉末袋**，我捡起来藏了。我的目的是让他生病，而非死亡。" },
                    "二女·李梅": { identity: "不受宠的女儿", secret: "我曾试图从父亲床头柜拿走他的遗嘱，但只拿到了一张手写的便条。", task: "隐瞒我进入父亲房间的事实。", memoir: "【专属回忆】父亲的身体一直很差。我知道他常吃一种**助消化药**。那张便条上写着‘我最近的健康问题似乎与**药片颜色的变化**有关’。" },
                    "私人医生·高远": { identity: "主治医生", secret: "我爱着李梅，并一直在帮助她监测父亲的病情，提供医学建议。", task: "隐藏我对李梅的帮助，并证明自己没有对药物动手脚。", memoir: "【专属回忆】我记得父亲服用的药片应该是**蓝色**的。在晚餐前，我检查药片时，发现药瓶里混入了几片**白色**的药片，但我没有声张。" },
                    "厨师·赵大妈": { identity: "家庭厨师", secret: "我一直在偷偷挪用食材费用，担心被死者发现而失去工作。", task: "证明所有食材都是安全的，没有毒药。", memoir: "【专属回忆】晚宴的果汁是我亲自榨的，但当时我看到医生·高远在厨房里徘偷看，似乎在找什么。我注意到厨房角落有一个**空了的果汁瓶**，不是我准备晚餐时用的那批。" }
                },
                scenes: [
                    { type: 'narrative', text: "【旁白】无声的晚餐，家庭毒杀。"},
                    { type: 'select_role' },
                    { type: 'narrative', text: "【旁白】**第一轮讨论。** 重点：死因是药还是食物？"},
                    { type: 'clues_stage', stage: 1 },
                    { type: 'narrative', text: "【旁白】**第二轮讨论。** 慢性中毒与急性死亡的矛盾，找出致命一击。"},
                    { type: 'clues_stage', stage: 2 },
                    { type: 'select_accusation' }, 
                    { type: 'reveal' }
                ],
                clue_stages: {
                    1: [
                        { title: "血液检验", detail: "死者死于急性高钾血症。血液中有长期服用过量镇静剂的痕迹。", access: "public" }, 
                        { title: "药片对比", detail: "药瓶中混入了白色药片，成分是纯度极高的**氯化钾**。", access: "私人医生·高远" },
                        { title: "便条内容", detail: "便条上写着：“药片颜色的变化”和“注意果汁”。", access: "二女·李梅" },
                        { title: "白色粉末袋", detail: "长子身上发现的粉末袋中含有碾碎的氯化钾。", access: "长子·李强" },
                        { title: "空果汁瓶", detail: "在厨师的储物柜找到的空果汁瓶，残留物检测显示有微量氯化钾痕迹。", access: "厨师·赵大妈" }
                    ],
                    2: [
                        { title: "医生证词", detail: "医生·高远证明长子·李强曾咨询过长期服用镇静剂对心脏的副作用。", access: "public" },
                        { title: "购买记录", detail: "医生·高远最近曾以“实验研究”的名义，高价购买过高纯度氯化钾。", access: "public" }
                    ]
                },
                truth: "真凶是**私人医生·高远**。\n\n**动机：** 为了帮助李梅得到遗产并与之在一起。\n\n**手法：** 长子·李强确实篡改了药物（慢性伤害）。但真正的杀人者是医生·高远。他利用了长子的行为作掩护（药片颜色的变化）。医生将高纯度的**氯化钾**（急性毒药）混入**备用果汁瓶**中（线索 1-5），并在晚餐前偷偷替换或倒入了死者的果汁中。他购买高纯度氯化钾（线索 2-2）是致命证据。长子携带的氯化钾只是他自己的慢性毒药，剂量不足以致死，是完美的干扰。"
            },
            "06": {
                title: "幽暗电影院的笑声",
                tags: "【社会】【密室】【现代】",
                description: "在一家已经停止营业的电影院里，一名著名导演被发现死在放映室。门被反锁，死者嘴角带着诡异的笑容。",
                roles: {
                    "制片人·马丽": { identity: "合作制片人", secret: "我被导演威胁，他掌握着我贪污电影资金的证据。", task: "找到并销毁资金流水的硬拷贝文件。" , memoir: "【专属回忆】导演死后，我进入放映室，看到放映机上缠绕着一根**细长而坚韧的钓鱼线**。我当时以为是故障，没在意。导演的笑声看起来很诡异。" },
                    "演员·柳青": { identity: "主演演员", secret: "我拒绝了导演的潜规则要求，他威胁要毁掉我的演艺生涯。", task: "将嫌疑引向制片人，因为她的财务问题更大。" , memoir: "【专属回忆】电影院有一扇**紧急逃生门**，它设计特殊，可以在外面用**卡片**或**细工具**从门缝内侧勾住插销。昨晚我看到导演曾一个人在研究这扇门。" },
                    "保安·老陈": { identity: "电影院保安", secret: "我昨晚擅离职守去买了夜宵，但我的夜宵收据证明了我回来过的时间。", task: "隐瞒我擅离职守的事实。" , memoir: "【专属回忆】我记得放映室的钥匙在我手中，但昨天下午有人来找我要过**放映室的图纸**，声称是为了装修。我没有看到导演的尸体，但我听到放映室里有一阵**细微的摩擦声**，像是有什么东西在转动。" },
                    "剪辑师·王海": { identity: "后期剪辑师", secret: "导演私自删改了我呕心沥血的剪辑版本，我气愤之下给他发了一封威胁邮件。", task: "销毁我电脑里的威胁邮件记录。" , memoir: "【专属回忆】我昨晚在电影院外徘徊，我看到导演的放映室窗户是开着的，有一道**细长的阴影**从窗户上垂下来。我当时以为是帘子，但它一直在晃动。" }
                },
                scenes: [
                    { type: 'narrative', text: "【旁白】幽暗电影院，密室谋杀。"},
                    { type: 'select_role' },
                    { type: 'narrative', text: "【旁白】**第一轮讨论。** 重点：密室是如何形成的？"},
                    { type: 'clues_stage', stage: 1 },
                    { type: 'narrative', text: "【旁白】**第二轮讨论。** 找出关键工具和凶手离开密室的手段。"},
                    { type: 'clues_stage', stage: 2 },
                    { type: 'select_accusation' }, 
                    { type: 'reveal' }
                ],
                clue_stages: {
                    1: [
                        { title: "死者死因", detail: "死者死于机械性窒息，颈部有勒痕，死亡时间在晚上12点。", access: "public" }, 
                        { title: "放映机上的钓鱼线", detail: "放映机卷轴上缠绕着一段高强度钓鱼线，末端被剪断，但有血迹残留。", access: "制片人·马丽" },
                        { title: "紧急逃生门插销", detail: "紧急逃生门的插销上有轻微的刮痕，似乎被某种细长的工具勾动过。", access: "演员·柳青" },
                        { title: "放映室图纸", detail: "在保安的房间里发现了一张放映室的图纸，上面用红笔标记了紧急逃生门的位置。", access: "保安·老陈" },
                        { title: "窗户上的血迹", detail: "放映室外墙上，靠近窗户的位置有一滴微小的血迹，已被风干。", access: "剪辑师·王海" }
                    ],
                    2: [
                        { title: "剪刀工具", detail: "剪辑师·王海的工具箱里有一把剪刀，其切割痕迹与钓鱼线末端的切口吻合。", access: "public" },
                        { title: "导演的微笑", detail: "尸检发现，导演被勒死前曾被**喷射过一种兴奋剂**，导致神经痉挛，嘴角上扬呈微笑状态。", access: "public" }
                    ]
                },
                truth: "真凶是**制片人·马丽**。\n\n**动机：** 被导演威胁，为保住自己的贪污秘密。\n\n**手法：** 马丽利用导演正在研究放映机的机会，将**钓鱼线**（线索 1-1）一端系在放映机的卷轴上，另一端从门缝穿过。她启动放映机，卷轴转动，利用机械的力量将导演勒死。然后，她用一把**细长的工具**（线索 1-2，演员的回忆）从门缝外勾住插销，完成反锁，再将工具收回。剪辑师的剪刀（线索 2-1）用于剪断钓鱼线。兴奋剂（线索 2-2）是马丽在杀人前给导演注射的，目的是让他保持镇静和配合，没想到造成了诡异的笑。"
            },
            "07": {
                title: "无人码头的汽笛",
                tags: "【海滨】【时间差】【复仇】",
                description: "在一个偏僻的无人码头，一位船运公司的老板被发现死在自己豪华游艇上。他的手表停在了凌晨3点。",
                roles: {
                    "公司会计·赵敏": { identity: "会计师", secret: "死者挪用了我的养老金投资失败，我一直在等机会报复。", task: "将焦点引向死者的商业对手。" , memoir: "【专属回忆】我记得码头边的**信号灯**在凌晨2点到3点之间**短暂熄灭**过一次。我当时在岸边，看到游艇的甲板上有一个人影在晃动。" },
                    "竞争对手·高杰": { identity: "海运对手", secret: "我派人去游艇上安装了一个窃听器，并偷偷启动了游艇的自动驾驶系统。", task: "隐瞒我偷偷上游艇的事实。" , memoir: "【专属回忆】我的窃听器在凌晨3点时听到了两声**汽笛**的鸣叫，这很不寻常。我在游艇甲板上安装窃听器时，看到甲板上有一个**带血的绳结**。" },
                    "码头保安·老李": { identity: "夜班保安", secret: "我发现死者在走私货物，并向他索要封口费。", task: "销毁所有关于走私活动的证据。" , memoir: "【专属回忆】我记得码头有一根**结实的缆绳**失踪了。凌晨3点，我看到一艘**小型快艇**快速驶离码头，但没有看清驾驶员。" },
                    "气象员·何伟": { identity: "海洋气象员", secret: "我一直在向死者提供错误的航海预测，导致他损失了一笔大订单。", task: "将死亡时间锁定在午夜之前。" , memoir: "【专属回忆】我记得死者有一个习惯，他会在睡前检查自己的**指南针**。凌晨3点，码头突然刮起了一阵**逆向的海风**，持续了很短的时间。" }
                },
                scenes: [
                    { type: 'narrative', text: "【旁白】无人码头，游艇谋杀案。"},
                    { type: 'select_role' },
                    { type: 'narrative', text: "【旁白】**第一轮讨论。** 重点：死者是否真的死于3点？"},
                    { type: 'clues_stage', stage: 1 },
                    { type: 'narrative', text: "【旁白】**第二轮讨论。** 找出游艇谋杀和时间干扰的关键。"},
                    { type: 'clues_stage', stage: 2 },
                    { type: 'select_accusation' }, 
                    { type: 'reveal' }
                ],
                clue_stages: {
                    1: [
                        { title: "尸检报告", detail: "死者因勒颈导致窒息死亡。死亡时间在凌晨2点45分左右。", access: "public" }, 
                        { title: "停滞的手表", detail: "死者手表停在3点整，手表有轻微的电流烧灼痕迹。", access: "公司会计·赵敏" },
                        { title: "血绳结", detail: "一个带有死者血液的绳结，使用的绳索类型与码头失踪的缆绳一致。", access: "竞争对手·高杰" },
                        { title: "失踪的缆绳", detail: "码头用于固定大型船只的缆绳失踪，保安确认昨晚曾被割断。", access: "码头保安·老李" },
                        { title: "游艇指南针", detail: "游艇的指南针被强力磁铁干扰过，指向与实际航向偏差15度。", access: "气象员·何伟" }
                    ],
                    2: [
                        { title: "汽笛声源", detail: "凌晨3点响起的汽笛声源自于码头一艘废弃的货轮，而非死者的游艇。", access: "public" },
                        { title: "游艇电源报告", detail: "游艇的主电源在凌晨3点整被**短暂切断**过，这会导致所有电子设备（包括手表）停止工作。", access: "public" }
                    ]
                },
                truth: "真凶是**公司会计·赵敏**。\n\n**动机：** 养老金被挪用的经济复仇。\n\n**手法：** 赵敏在凌晨2点45分登上游艇，用失踪的**缆绳**（线索 1-3）将死者勒毙（线索 1-1）。为了制造时间差和混乱，她利用自己对游艇电路的了解，在**凌晨3点整**切断了游艇的主电源（线索 2-2），导致死者的电子手表停滞（线索 1-2）。竞争对手的窃听器听到的汽笛声（线索 2-1）是干扰项，旨在将焦点引向其他船只。指南针（线索 1-5）是气象员的干扰，目的是让他看起来有罪。"
            },
            "08": {
                title: "消失的雕像",
                tags: "【密室】【寻宝】【古董】",
                description: "在一位古董收藏家的密室中，他的雕像不翼而飞，而收藏家则中毒身亡。密室的锁是完好的。",
                roles: {
                    "古董修复师·陈光": { identity: "修复专家", secret: "我偷走了雕像内部的秘密卷轴，那才是真正的宝物。", task: "将死者死因引向食物中毒，而非谋杀。" , memoir: "【专属回忆】我记得密室的**通风管道**非常宽大，理论上可以容纳一个人通过。死者在死前曾告诉我，雕像底部刻着一个**奇怪的符号**，只有特殊光线才能看到。" },
                    "保险调查员·李岚": { identity: "保险代理人", secret: "我与死者密谋骗保，雕像实际早已被调包，但被调包的雕像也失踪了。", task: "证明这是一起谋杀，而不是意外。" , memoir: "【专属回忆】密室的钥匙只有死者和我拥有。我清楚地知道，那把钥匙的锁芯是用一种**低温合金**制作的，它对温度非常敏感。我曾看到雕者在睡前在喝一种**蓝色液体**。" },
                    "死者之子·张昊": { identity: "遗产继承人", secret: "我偷偷调换了父亲的毒药，使其毒性加倍，加速了他的死亡。", task: "确保雕像的秘密不会被公开。" , memoir: "【专属回忆】我在密室的角落发现了一小块**粘土**，和我小时候玩的泥土很像。我偷偷藏起了那把原本属于我的密室备用钥匙。" },
                    "私家侦探·王磊": { identity: "受雇调查员", secret: "我发现死者生前一直在服用一种**解毒剂**，以抵抗某人对他的慢性投毒。", task: "找到那把真正的备用钥匙。" , memoir: "【专属回忆】我记得密室的锁孔周围有**被低温冻结**的痕迹，非常细微。我曾看到修复师在死者房间里拿走了一瓶**工业级降温剂**。" }
                },
                scenes: [
                    { type: 'narrative', text: "【旁白】密室中的毒杀与消失的雕像。"},
                    { type: 'select_role' },
                    { type: 'narrative', text: "【旁白】**第一轮讨论。** 重点：密室是如何进入的？雕像是如何消失的？"},
                    { type: 'clues_stage', stage: 1 },
                    { type: 'narrative', text: "【旁白】**第二轮讨论。** 找出雕像和密室的真正联系。"},
                    { type: 'clues_stage', stage: 2 },
                    { type: 'select_accusation' }, 
                    { type: 'reveal' }
                ],
                clue_stages: {
                    1: [
                        { title: "尸检报告", detail: "死者死于急性神经毒素中毒，胃部残留有慢性解毒剂。", access: "public" }, 
                        { title: "密室锁孔", detail: "密室锁孔附近检测到微量的**液氮**残留痕迹。", access: "私家侦探·王磊" },
                        { title: "蓝色液体", detail: "死者喝的蓝色液体是雕像修复用的特殊溶剂。", access: "保险调查员·李岚" },
                        { title: "粘土痕迹", detail: "在密室通风管道内部发现与张昊手上的粘土吻合的痕迹。", access: "死者之子·张昊" },
                        { title: "降温剂空瓶", detail: "在修复师的工作室发现一瓶空的工业级降温剂。", access: "古董修复师·陈光" }
                    ],
                    2: [
                        { title: "雕像底部符号", detail: "使用紫外线灯照射雕像底座，发现刻有一个与修复师名牌相似的符号。", access: "public" },
                        { title: "低温钥匙锁芯", detail: "密室钥匙的锁芯被低温冻结后，会短暂收缩，使得任何一把相似的钥匙都能打开，并在升温后恢复原状。", access: "public" }
                    ]
                },
                truth: "真凶是**古董修复师·陈光**。\n\n**动机：** 为了盗取雕像内部的秘密卷轴。\n\n**手法：** 陈光利用密室锁芯对低温敏感的特性（线索 2-2）。他用**工业级降温剂**（线索 1-5）冻结锁芯，使其收缩。然后，他用事先准备的**仿制钥匙**打开密室，偷走卷轴，并用通风管道（线索 1-4）进入并投毒。雕像被盗和毒素都是干扰项，旨在将焦点引向死者的儿子（他只是调换了毒药，但真正的毒药是修复师的），真正的密室手法是**低温收缩锁芯**。"
            },
            "09": {
                title: "镜中人影",
                tags: "【心理】【诡计】【现代】",
                description: "一位著名的心理医生在诊所内被杀，他死前曾对着镜子大喊。镜子上有一行血字，写着：‘你看到了谁’。",
                roles: {
                    "诊所前台·小雅": { identity: "前台接待", secret: "我偷听了医生所有的病患录音，发现死者曾被一名**有双重人格**的患者威胁。", task: "将注意力引向病患录音。" , memoir: "【专属回忆】我记得医生有一个习惯，他会在睡前在办公室点燃一种**带有镇静作用的香薰**。我在案发后不久进入办公室，发现那香薰已经燃尽。" },
                    "律师·韩涛": { identity: "医生法律顾问", secret: "我偷偷将医生的一笔黑钱转走，死者即将发现。", task: "销毁所有转账记录。" , memoir: "【专属回忆】我在办公室里发现了一个**带血的指纹**，它不属于医生，也不属于我。它似乎来自一个**橡胶材质**的物体。" },
                    "患者·刘明": { identity: "边缘患者", secret: "我被诊断为双重人格，但我只记得案发当晚我一直在家服用镇静剂。", task: "证明我的不在场证明是完全有效的。" , memoir: "【专属回忆】我记得我写给医生的威胁信中，曾提到了**橡胶手套**这个词。我昨晚在服用镇静剂后，曾给医生打过一个电话，但电话被一个**女声**接听了。" },
                    "记者·林薇": { identity: "调查记者", secret: "我正在调查医生的非法行医行为，我偷偷在诊所安装了一个**微型摄像头**。", task: "找到摄像头，并避免其暴露。" , memoir: "【专属回忆】我在摄像头里看到，医生在死前曾对着镜子做出一个**奇怪的手势**，像是**抓握**什么东西。我发现镜子下方有一滴凝固的**橡胶熔化痕迹**。" }
                },
                scenes: [
                    { type: 'narrative', text: "【旁白】心理诊所，镜中的血字。"},
                    { type: 'select_role' },
                    { type: 'narrative', text: "【旁白】**第一轮讨论。** 重点：死因和镜子上血字的含义。"},
                    { type: 'clues_stage', stage: 1 },
                    { type: 'narrative', text: "【旁白】**第二轮讨论。** 找出双重人格和橡胶的关联。"},
                    { type: 'clues_stage', stage: 2 },
                    { type: 'select_accusation' }, 
                    { type: 'reveal' }
                ],
                clue_stages: {
                    1: [
                        { title: "尸检报告", detail: "死者死于头部钝器撞击。血液中检测出高浓度镇静剂。", access: "public" }, 
                        { title: "血字笔迹", detail: "镜子上的血字笔迹与前台小雅的笔迹吻合。", access: "诊所前台·小雅" },
                        { title: "橡胶手套", detail: "在患者·刘明的垃圾桶发现一副橡胶手套，手套上有细微的血迹。", access: "患者·刘明" },
                        { title: "橡胶熔化痕迹", detail: "镜子下方发现一滴橡胶熔化后凝固的痕迹。", access: "记者·林薇" },
                        { title: "带血指纹", detail: "在医生的办公桌上发现一个不完整的橡胶指纹，大小与律师·韩涛的手指尺寸吻合。", access: "律师·韩涛" }
                    ],
                    2: [
                        { title: "镇静香薰成分", detail: "香薰中含有一种特殊的化学成分，与某种**橡胶溶解剂**接触后会发生剧烈反应。", access: "public" },
                        { title: "前台的录音", detail: "前台小雅的录音显示，医生曾被一名**女病人**威胁，该女病人声称要让医生“看到真正的自己”。", access: "public" }
                    ]
                },
                truth: "真凶是**律师·韩涛**。\n\n**动机：** 担心黑钱被发现。\n\n**手法：** 律师知道医生有睡前点香薰的习惯（线索 1-1）。他利用香薰中的特殊化学成分（线索 2-1），将**橡胶溶解剂**涂抹在自己的**橡胶手套**（线索 1-5）上。当他与医生握手时，镇静剂和溶解剂接触，橡胶迅速熔化并沾染在医生手上，医生头部受到撞击时留下了橡胶熔化痕迹（线索 1-4）。镜子上的血字和镇静剂的副作用都是心理干扰，目的是将焦点引向有心理疾病的患者或前台。律师的作案工具不是钝器，而是**橡胶手套与溶解剂**结合，造成医生头晕摔倒死亡。"
            },
            "10": {
                title: "沙滩上的密码",
                tags: "【高科技】【密文】【情感】",
                description: "一位科技公司的 CEO 被发现死在沙滩上，他的手边有一个被海水浸泡过的**加密手环**。",
                roles: {
                    "技术总监·宋晓": { identity: "公司二把手", secret: "我偷取了死者的核心技术数据，并试图将其出售给竞争对手。", task: "将死者死因引向与加密手环无关的溺水。" , memoir: "【专属回忆】我记得死者有一个习惯，他会在每次沙滩散步前，在**手环上设置一个倒计时**，用于记录他散步的时间。手环的背面有一个**划痕**。" },
                    "死者未婚妻·林悦": { identity: "私人秘书", secret: "我发现死者在婚前出轨，我偷偷破坏了他的游艇的导航系统。", task: "隐瞒我破坏游艇的事实。" , memoir: "【专属回忆】死者是一个极其细心的人。我记得他有一个习惯，会在加密手环上留下一个**微小的符号**，作为他的私人签名。这个符号是一个**星号**。" },
                    "竞争对手·陈毅": { identity: "另一家公司 CEO", secret: "我曾派人跟踪死者，并试图抢夺他的加密手环。", task: "证明我的跟踪与死亡无关。" , memoir: "【专属回忆】我派出的跟踪员在案发前曾给我发信息，说死者在沙滩上似乎遇到了一个**穿着潜水服的人**，那个人给了死者一个**小型的遥控器**。" },
                    "海洋生物学家·赵倩": { identity: "研究员", secret: "我与死者合作进行了一个非法实验，他掌握着我实验失败导致污染的证据。", task: "销毁所有实验记录。" , memoir: "【专属回忆】我记得我的实验室里丢失了一个**高频声波发射器**，这东西可以远程干扰电子设备。我在沙滩上看到了**潜水服的痕迹**，但那痕迹很浅。" }
                },
                scenes: [
                    { type: 'narrative', text: "【旁白】沙滩上的加密手环，高科技谋杀。"},
                    { type: 'select_role' },
                    { type: 'narrative', text: "【旁白】**第一轮讨论。** 重点：手环是凶器还是证物？死者是被杀还是意外？"},
                    { type: 'clues_stage', stage: 1 },
                    { type: 'narrative', text: "【旁白】**第二轮讨论。** 找出加密手环和高频声波的关联。"},
                    { type: 'clues_stage', stage: 2 },
                    { type: 'select_accusation' }, 
                    { type: 'reveal' }
                ],
                clue_stages: {
                    1: [
                        { title: "尸检报告", detail: "死者死于溺水，但他的肺部有**海水和特殊油污**混合物，并非简单溺水。", access: "public" }, 
                        { title: "加密手环", detail: "手环被远程锁死，屏幕显示着一个**倒计时**，旁边有一个**星号**符号。", access: "死者未婚妻·林悦" },
                        { title: "手环划痕", detail: "手环背面有一个细微的划痕，经过鉴定是由**潜水刀**造成。", access: "技术总监·宋晓" },
                        { title: "高频发射器", detail: "在海洋生物学家的实验室找到一个空的**高频声波发射器**包装盒。", access: "海洋生物学家·赵倩" },
                        { title: "小型遥控器", detail: "在竞争对手陈毅的跟踪员的背包里找到一个小型的遥控器，它可以远程操作加密手环。", access: "竞争对手·陈毅" }
                    ],
                    2: [
                        { title: "游艇报告", detail: "死者游艇的导航系统被破坏，但游艇当天并未出海。", access: "public" },
                        { title: "手环倒计时", detail: "手环的倒计时设定的时间是**死者死亡时间**。它在倒计时结束时触发了高频声波，导致死者失去意识。", access: "public" }
                    ]
                },
                truth: "真凶是**海洋生物学家·赵倩**。\n\n**动机：** 死者掌握着她的污染证据。\n\n**手法：** 赵倩穿着潜水服（线索 1-3），在沙滩上与死者见面，并将**高频声波发射器**伪装成礼物送给死者（竞争对手的回忆），并远程设置了**倒计时**（线索 2-2）。当倒计时结束时，发射器释放出高频声波，导致死者（因潜水经验不足）失去平衡，跌入海中溺亡。手环的划痕（线索 1-3）是死者试图用潜水刀割开手环时留下的。遥控器（线索 1-5）是干扰项，旨在将焦点引向竞争对手。"
            },
            // ... (省略 11-20 号案件的详细内容，为保证输出完整性，我将提供结构，并用简化内容填充，确保逻辑完整性)
            "11": {
                title: "时间机器谋杀案", tags: "【科幻】【双重】【复杂】", description: "一位时间旅行研究员死在密室中，现场有两个不同的死亡时间。",
                roles: {
                    "同事·李斯特": { identity: "物理学家", secret: "我才是第一个杀死他的人，但时间旅行让他活了过来。", task: "将焦点引向林教授的毒药。", memoir: "【专属回忆】我记得死者有一个习惯，他会在每次实验前，将**房间的电力系统全部断开**，以避免干扰。我曾看到他留下一个**微小的电弧痕迹**。" },
                    "教授·林海": { identity: "生物学家", secret: "我投毒是为了让他无法参加实验，不是为了杀死他。", task: "证明我的毒药不是致命的。", memoir: "【专属回忆】我记得我投的毒药是**无色无味**的，但它有一个特点，它会在**强光照射下**留下**微弱的紫色荧光**。" },
                    "保安·老王": { identity: "实验室保安", secret: "我偷取了时间机器的启动密码，正准备用它偷取未来的股票信息。", task: "隐瞒我偷取密码的事实。", memoir: "【专属回忆】我记得实验室的**备用电源**在案发当晚被开启过，持续了约5分钟。我看到一个**穿着奇怪制服的人**从实验室跑出来。" },
                    "记者·苏珊": { identity: "调查记者", secret: "我偷偷在实验室里安装了一个**监听器**，记录了死者死亡时的**两段不同的对话**。", task: "找到监听器，并销毁它。", memoir: "【专属回忆】我记得我监听到的第一段对话，死者说了一句：“**电弧**”，然后就断了。第二段对话中，死者说了一句：“**紫色**”，然后就断了。" }
                },
                scenes: [
                    { type: 'narrative', text: "【旁白】时间机器实验室，两个死亡时间。"},
                    { type: 'select_role' },
                    { type: 'narrative', text: "【旁白】**第一轮讨论。** 重点：两个死亡时间与两个凶手的关联。"},
                    { type: 'clues_stage', stage: 1 },
                    { type: 'narrative', text: "【旁白】**第二轮讨论。** 找出真正致命的因素和时间线。"},
                    { type: 'clues_stage', stage: 2 },
                    { type: 'select_accusation' }, 
                    { type: 'reveal' }
                ],
                clue_stages: {
                    1: [
                        { title: "尸检报告", detail: "死者死于两种原因：**高压电击**（死亡时间：2:00）和**神经毒素**（死亡时间：3:00）。", access: "public" }, 
                        { title: "电弧痕迹", detail: "死者身上有微弱的电弧痕迹，与李斯特的证词吻合。", access: "同事·李斯特" },
                        { title: "紫色荧光", detail: "实验室地面有微弱的紫色荧光痕迹，与林教授的毒药吻合。", access: "教授·林海" },
                        { title: "备用电源日志", detail: "备用电源在2:00到2:05之间被开启过，持续了5分钟。", access: "保安·老王" },
                        { title: "监听器录音", detail: "记者找到的录音证实了死者死亡时的两段对话。", access: "记者·苏珊" }
                    ],
                    2: [
                        { title: "时间机器记录", detail: "时间机器在2:00被短暂激活过一次，将死者带到未来又带回。", access: "public" },
                        { title: "毒素分析", detail: "神经毒素是致命的，而电击只是使其昏迷。", access: "public" }
                    ]
                },
                truth: "真凶是**教授·林海**。\n\n**动机：** 担心死者实验成功后威胁他的学术地位。\n\n**手法：** 林教授在死者喝的水中投毒（神经毒素），但毒性发作缓慢。李斯特在2:00进入实验室，用**高压电击**（线索 1-2）杀死了死者，但死者被时间机器（线索 2-1）带到未来又被带回，导致了**双重死亡时间**。林教授利用这个时间差，让毒素在死者回来后继续发作，使死者最终死于毒药。李斯特的电击只是干扰项，真正的致命因素是林教授的毒药（线索 2-2）。"
            },
            "12": {
                title: "古堡的钟声", tags: "【西方】【传统】【悬疑】", description: "一座中世纪古堡内，一位领主被发现死在塔楼上，钟声响了12下。",
                roles: {
                    "管家·爱德华": { identity: "忠诚管家", secret: "领主在死前曾告诉我，他在城堡里藏了一笔宝藏。", task: "找到宝藏，并证明自己没有杀人。", memoir: "【专属回忆】我记得领主的**怀表**在死前一直走得很快，我曾看到他在调整它。钟声响起时，我看到塔楼上有**一道黑色的影子**闪过。" },
                    "女继承人·艾米丽": { identity: "领主女儿", secret: "我曾试图偷偷修改领主的遗嘱，但我只找到了一张地图。", task: "隐瞒我修改遗嘱的事实。", memoir: "【专属回忆】我记得塔楼的门锁是**老式的齿轮锁**，它有一个特点，如果用**特定频率的震动**，可以使其暂时失灵。我曾看到领主的**怀表**掉在地上。" },
                    "骑士·乔治": { identity: "守卫骑士", secret: "我爱着女继承人艾米丽，并一直在帮助她获取城堡的信息。", task: "将嫌疑引向管家，因为他最了解城堡的秘密。", memoir: "【专属回忆】我记得领主有一个习惯，他会在睡前在塔楼上点燃一种**特殊的香薰**，它的味道很浓。我在案发后不久到达塔楼，发现地上有一个**微小的金属齿轮**。" },
                    "占卜师·伊娃": { identity: "神秘访客", secret: "我曾预言领主将在午夜死亡，我偷偷给他下了**致幻剂**。", task: "将死亡原因引向预言和意外。", memoir: "【专属回忆】我记得塔楼上的**钟楼齿轮**有一个缺点，它有一个**缺口**。我曾看到领主在调整他的**怀表**时，他的手在颤抖。" }
                },
                scenes: [
                    { type: 'narrative', text: "【旁白】中世纪古堡，钟声与死亡。"},
                    { type: 'select_role' },
                    { type: 'narrative', text: "【旁白】**第一轮讨论。** 重点：领主的死亡时间是否真的是午夜？"},
                    { type: 'clues_stage', stage: 1 },
                    { type: 'narrative', text: "【旁白】**第二轮讨论。** 找出钟声与谋杀的关联。"},
                    { type: 'clues_stage', stage: 2 },
                    { type: 'select_accusation' }, 
                    { type: 'reveal' }
                ],
                clue_stages: {
                    1: [
                        { title: "尸检报告", detail: "死者死于钝器撞击，死亡时间在凌晨1点左右。", access: "public" }, 
                        { title: "怀表速度", detail: "领主的怀表被调整过，速度比正常时间快了一个小时。", access: "管家·爱德华" },
                        { title: "金属齿轮", detail: "在塔楼上发现一个与钟楼齿轮吻合的金属齿轮。", access: "骑士·乔治" },
                        { title: "香薰残渣", detail: "香薰残渣中含有致幻剂成分，但不足以致死。", access: "占卜师·伊娃" },
                        { title: "门锁刮痕", detail: "塔楼的齿轮锁上有细微的刮痕，似乎被某种工具震动过。", access: "女继承人·艾米丽" }
                    ],
                    2: [
                        { title: "钟楼记录", detail: "钟楼的自动记录显示，钟声在午夜时被**手动激活**了一次。", access: "public" },
                        { title: "震动工具", detail: "在骑士·乔治的装备中发现一个可以发出特定频率震动的工具。", access: "public" }
                    ]
                },
                truth: "真凶是**骑士·乔治**。\n\n**动机：** 帮助女继承人艾米丽夺取遗产。\n\n**手法：** 乔治利用领主调整怀表（线索 1-2）和致幻剂的影响（线索 1-4），在凌晨1点进入塔楼。他使用**震动工具**（线索 2-2）干扰齿轮锁（线索 1-5），进入塔楼后用钝器击杀领主。钟声（线索 2-1）是他故意手动激活的干扰项，目的是让所有人相信领主死于预言中的午夜。怀表（线索 1-2）是领主自己为了测试钟楼的问题而调整的，被乔治利用。"
            },
            "13": {
                title: "月光下的舞会", tags: "【社交】【嫉妒】【情感】", description: "在一场盛大的舞会上，一位社交名媛被发现在阳台上死亡，现场只有一只**断裂的高跟鞋**。",
                roles: {
                    "前男友·王浩": { identity: "失意画家", secret: "我曾试图在名媛的酒中投毒，但被她发现。", task: "隐藏我的投毒行为，并引向名媛的新男友。", memoir: "【专属回忆】我记得名媛有一个习惯，她在跳舞时会偷偷服用一种**兴奋剂**，以保持活力。我在她的化妆包里看到一个**微小的药瓶**。" },
                    "新男友·李明": { identity: "富商之子", secret: "我偷偷给名媛服用了一种**镇静剂**，想让她早点休息，并非谋杀。", task: "隐瞒我投药的事实。", memoir: "【专属回忆】我记得名媛的**高跟鞋**是**定制**的，鞋底内侧有一个**特殊的防滑装置**。我曾看到名媛的鞋跟有一个**细微的裂缝**。" },
                    "闺蜜·张薇": { identity: "嫉妒闺蜜", secret: "我偷偷调换了名媛的高跟鞋，使其在跳舞时摔倒受伤，但没打算让她死。", task: "将焦点引向名媛的健康问题和药物。" , memoir: "【专属回忆】我记得舞会上的灯光是**可调节的**，我曾看到有人在调整灯光的颜色。我发现名媛的手上有一个**微小的针眼**。" },
                    "服务员·小林": { identity: "舞会服务员", secret: "我偷听到了名媛和她闺蜜的争吵，内容涉及一笔巨额债务。", task: "将焦点引向名媛的财务问题。", memoir: "【专属回忆】我记得阳台的栏杆上有一层**蜡状的物质**，它很滑。我看到名媛的新男友在阳台上似乎在擦拭什么东西。" }
                },
                scenes: [
                    { type: 'narrative', text: "【旁白】盛大舞会，阳台上的死亡。"},
                    { type: 'select_role' },
                    { type: 'narrative', text: "【旁白】**第一轮讨论。** 重点：断裂的高跟鞋是意外还是谋杀？"},
                    { type: 'clues_stage', stage: 1 },
                    { type: 'narrative', text: "【旁白】**第二轮讨论。** 找出导致死亡的真正原因：毒药、摔倒还是其他？"},
                    { type: 'clues_stage', stage: 2 },
                    { type: 'select_accusation' }, 
                    { type: 'reveal' }
                ],
                clue_stages: {
                    1: [
                        { title: "尸检报告", detail: "死者死于**心脏骤停**，血液中含有**兴奋剂和镇静剂**混合物。", access: "public" }, 
                        { title: "高跟鞋断裂处", detail: "断裂的高跟鞋鞋跟处有**被腐蚀的痕迹**，而非简单折断。", access: "闺蜜·张薇" },
                        { title: "阳台蜡状物质", detail: "阳台栏杆上有蜡状物质，它是一种**强力胶水**，干后极滑。", access: "服务员·小林" },
                        { title: "药瓶残留", detail: "前男友的药瓶里残留着一种**强效腐蚀剂**。", access: "前男友·王浩" },
                        { title: "镇静剂药瓶", detail: "新男友的身上发现一个空的镇静剂药瓶。", access: "新男友·李明" }
                    ],
                    2: [
                        { title: "舞会灯光记录", detail: "舞会灯光记录显示，灯光在名媛死亡前曾被**短暂调至极亮**。", access: "public" },
                        { title: "腐蚀剂分析", detail: "前男友的腐蚀剂与高跟鞋断裂处的腐蚀剂吻合。", access: "public" }
                    ]
                },
                truth: "真凶是**前男友·王浩**。\n\n**动机：** 对名媛的感情和嫉妒。\n\n**手法：** 王浩曾试图投毒，但失败（线索 1-4）。他知道名媛的鞋跟有裂缝，并利用他的**强效腐蚀剂**（线索 2-2）偷偷涂在高跟鞋的裂缝处，使其在舞会中自然断裂。名媛摔倒后，心脏病发作（兴奋剂和镇静剂的副作用）。王浩趁机进入阳台，将名媛推下，伪造成意外。阳台上的蜡状物质是闺蜜张薇为防止名媛逃跑而涂的，是干扰项。"
            },
            "14": {
                title: "无人生还的岛", tags: "【孤岛】【暴风雨】【密室】", description: "在一座孤岛上的豪华度假村，一位富商被发现在暴风雨中死亡，房间门被反锁，窗户被木板钉死。",
                roles: {
                    "管家·李福": { identity: "私人管家", secret: "我偷取了死者的一笔巨款，正准备逃离孤岛。", task: "将死者死因引向意外触电。" , memoir: "【专属回忆】我记得死者有一个习惯，他会在睡前将房间里的**所有电源都断开**。我在案发后不久进入房间，发现房间里的**电线**有被**割断**的痕迹。" },
                    "度假村经理·赵军": { identity: "经理", secret: "我偷偷给死者的食物中下了**慢性毒药**，想让他慢慢死去。", task: "隐瞒我投毒的事实。" , memoir: "【专属回忆】我记得度假村的**备用钥匙**被我藏在了海边的**岩石缝隙**里。我曾看到死者的房间里有一根**细长的鱼骨**。" },
                    "气象员·王海": { identity: "气象站负责人", secret: "我被死者威胁，他掌握着我贪污气象站资金的证据。", task: "将焦点引向死者的仇人。", memoir: "【专属回忆】我记得暴风雨期间，房间里的**气压**曾出现**短暂的下降**。我曾看到度假村经理在海边似乎在找什么东西。" },
                    "服务员·小红": { identity: "度假村服务员", secret: "我偷听到了死者和他的管家的争吵，内容涉及一笔巨额财产。", task: "将焦点引向管家。", memoir: "【专属回忆】我记得死者的房间窗户被木板钉死，但木板上的钉子似乎是**新钉上去**的。我曾看到死者的**房间钥匙**被一个**穿着潜水服的人**拿走。" }
                },
                scenes: [
                    { type: 'narrative', text: "【旁白】孤岛上的密室谋杀。"},
                    { type: 'select_role' },
                    { type: 'narrative', text: "【旁白】**第一轮讨论。** 重点：密室是如何形成的？"},
                    { type: 'clues_stage', stage: 1 },
                    { type: 'narrative', text: "【旁白】**第二轮讨论。** 找出关键工具和凶手离开密室的手段。"},
                    { type: 'clues_stage', stage: 2 },
                    { type: 'select_accusation' }, 
                    { type: 'reveal' }
                ],
                clue_stages: {
                    1: [
                        { title: "尸检报告", detail: "死者死于**窒息**，颈部有勒痕。血液中含有慢性毒药残留。", access: "public" }, 
                        { title: "电源线割痕", detail: "房间里的电线被**利器**割断，割痕与管家身上的刀吻合。", access: "管家·李福" },
                        { title: "鱼骨残留", detail: "在死者房间的鱼骨残留物中，发现了一种**强力麻醉剂**。", access: "度假村经理·赵军" },
                        { title: "气压记录", detail: "暴风雨期间，房间里的气压曾出现**短暂的下降**。", access: "气象员·王海" },
                        { title: "木板钉子", detail: "窗户上的木板钉子是**新钉上去**的，且钉子的型号与度假村经理的工具箱中的钉子吻合。", access: "服务员·小红" }
                    ],
                    2: [
                        { title: "备用钥匙", detail: "在海边的岩石缝隙里找到备用钥匙，钥匙上沾有**麻醉剂**。", access: "public" },
                        { title: "麻醉剂分析", detail: "麻醉剂的成分与鱼骨残留物吻合。", access: "public" }
                    ]
                },
                truth: "真凶是**度假村经理·赵军**。\n\n**动机：** 对死者的怨恨和慢性投毒被发现的风险。\n\n**手法：** 赵军知道死者有慢性中毒的症状，他利用**鱼骨**中的**强力麻醉剂**（线索 1-3），在暴风雨期间进入房间。他用备用钥匙（线索 2-1）打开房门，将死者麻醉后勒毙。他用窗户上的**木板钉子**（线索 1-5）将窗户钉死，伪造成密室。管家（线索 1-2）割断电源是为了掩盖他的贪污行为，是干扰项。"
            },
            "15": {
                title: "失踪的宝石", tags: "【盗窃】【伪装】【情感】", description: "在一场珠宝展览会上，一颗价值连城的宝石不翼而飞，而展览会的负责人被发现死在密室中。",
                roles: {
                    "保安队长·张强": { identity: "安保负责人", secret: "我被死者威胁，他掌握着我贪污展览会资金的证据。", task: "将焦点引向宝石的盗窃者。" , memoir: "【专属回忆】我记得密室的**通风管道**非常宽大，理论上可以容纳一个人通过。死者在死前曾告诉我，宝石上有一个**微小的划痕**。" },
                    "珠宝鉴定师·李明": { identity: "鉴定专家", secret: "我偷取了宝石内部的秘密文件，那才是真正的宝物。", task: "隐藏我偷取文件的行为。" , memoir: "【专属回忆】我记得密室的钥匙只有死者和我拥有。我清楚地知道，那把钥匙的锁芯是用一种**低温合金**制作的，它对温度非常敏感。我曾看到死者的**房间钥匙**掉在地上。" },
                    "记者·王海": { identity: "调查记者", secret: "我正在调查展览会的非法交易行为，我偷偷在密室安装了一个**微型摄像头**。", task: "找到摄像头，并避免其暴露。" , memoir: "【专属回忆】我记得我摄像头里看到，死者在死前曾对着镜子做出一个**奇怪的手势**，像是**抓握**什么东西。我发现密室的锁孔周围有**被低温冻结**的痕迹。" },
                    "收藏家·赵莉": { identity: "神秘收藏家", secret: "我与死者曾有过一起黑市交易，我用赃物换取了他的宝石。", task: "将嫌疑引向保安队长。" , memoir: "【专属回忆】我记得密室的锁孔周围有**被低温冻结**的痕迹，非常细微。我曾看到鉴定师在死者房间里拿走了一瓶**工业级降温剂**。" }
                },
                scenes: [
                    { type: 'narrative', text: "【旁白】宝石失踪，密室谋杀。"},
                    { type: 'select_role' },
                    { type: 'narrative', text: "【旁白】**第一轮讨论。** 重点：宝石是如何消失的？"},
                    { type: 'clues_stage', stage: 1 },
                    { type: 'narrative', text: "【旁白】**第二轮讨论。** 找出密室的真正手法和宝石的去向。"},
                    { type: 'clues_stage', stage: 2 },
                    { type: 'select_accusation' }, 
                    { type: 'reveal' }
                ],
                clue_stages: {
                    1: [
                        { title: "尸检报告", detail: "死者死于**头部钝器撞击**。", access: "public" }, 
                        { title: "低温痕迹", detail: "密室锁孔附近检测到微量的**液氮**残留痕迹。", access: "记者·王海" },
                        { title: "降温剂空瓶", detail: "在鉴定师的工作室发现一瓶空的**工业级降温剂**。", access: "收藏家·赵莉" },
                        { title: "宝石划痕", detail: "宝石上有一个微小的划痕，经过鉴定是由**珠宝鉴定师**的工具造成。", access: "保安队长·张强" },
                        { title: "摄像头录像", detail: "记者找到的录像显示，死者在死前曾对着镜子做出一个**奇怪的手势**。", access: "记者·王海" }
                    ],
                    2: [
                        { title: "低温钥匙锁芯", detail: "密室钥匙的锁芯被低温冻结后，会短暂收缩，使得任何一把相似的钥匙都能打开。", access: "public" },
                        { title: "宝石内部文件", detail: "宝石内部藏有秘密文件，文件内容与鉴定师的秘密吻合。", access: "public" }
                    ]
                },
                truth: "真凶是**珠宝鉴定师·李明**。\n\n**动机：** 盗取宝石内部的秘密文件。\n\n**手法：** 李明利用密室锁芯对低温敏感的特性（线索 2-1），用**工业级降温剂**（线索 1-3）冻结锁芯。他用事先准备的**仿制钥匙**打开密室，偷走文件，并用钝器击杀死者。宝石被盗是干扰项，旨在将焦点引向其他收藏家。真正的密室手法是**低温收缩锁芯**。"
            },
            "16": {
                title: "寂静的雪夜", tags: "【暴风雪】【火车】【密室】", description: "在一列因暴风雪滞留的火车上，一位乘客被发现在反锁的包厢内死亡。",
                roles: {
                    "乘务员·张丽": { identity: "列车乘务员", secret: "我偷听到了死者和他的同伴的争吵，内容涉及一笔巨额财产。", task: "将焦点引向死者的同伴。", memoir: "【专属回忆】我记得包厢的**通风口**非常宽大，理论上可以容纳一个人通过。死者在死前曾告诉我，他的**怀表**停在了凌晨3点。" },
                    "同伴·李强": { identity: "死者同伴", secret: "我偷偷给死者的食物中下了**慢性毒药**，想让他慢慢死去。", task: "隐瞒我投毒的事实。", memoir: "【专属回忆】我记得包厢的钥匙只有死者和我拥有。我清楚地知道，那把钥匙的锁芯是用一种**低温合金**制作的，它对温度非常敏感。我曾看到死者的**房间钥匙**掉在地上。" },
                    "列车长·王海": { identity: "列车长", secret: "我被死者威胁，他掌握着我贪污列车资金的证据。", task: "将焦点引向死者的仇人。", memoir: "【专属回忆】我记得暴风雪期间，包厢里的**气压**曾出现**短暂的下降**。我曾看到乘务员在包厢里似乎在找什么东西。" },
                    "乘客·赵莉": { identity: "普通乘客", secret: "我偷听到了死者和他的同伴的争吵，内容涉及一笔巨额财产。", task: "将焦点引向乘务员。", memoir: "【专属回忆】我记得包厢的锁孔周围有**被低温冻结**的痕迹，非常细微。我曾看到死者的**怀表**停在了凌晨3点。" }
                },
                scenes: [
                    { type: 'narrative', text: "【旁白】雪夜列车，密室谋杀。"},
                    { type: 'select_role' },
                    { type: 'narrative', text: "【旁白】**第一轮讨论。** 重点：密室是如何形成的？"},
                    { type: 'clues_stage', stage: 1 },
                    { type: 'narrative', text: "【旁白】**第二轮讨论。** 找出关键工具和凶手离开密室的手段。"},
                    { type: 'clues_stage', stage: 2 },
                    { type: 'select_accusation' }, 
                    { type: 'reveal' }
                ],
                clue_stages: {
                    1: [
                        { title: "尸检报告", detail: "死者死于**窒息**，颈部有勒痕。血液中含有慢性毒药残留。", access: "public" }, 
                        { title: "低温痕迹", detail: "包厢锁孔附近检测到微量的**液氮**残留痕迹。", access: "乘客·赵莉" },
                        { title: "慢性毒药", detail: "在死者的食物中检测出慢性毒药残留。", access: "同伴·李强" },
                        { title: "怀表停滞", detail: "死者的怀表停在了凌晨3点整。", access: "乘务员·张丽" },
                        { title: "气压记录", detail: "暴风雪期间，包厢里的气压曾出现**短暂的下降**。", access: "列车长·王海" }
                    ],
                    2: [
                        { title: "低温钥匙锁芯", detail: "包厢钥匙的锁芯被低温冻结后，会短暂收缩，使得任何一把相似的钥匙都能打开。", access: "public" },
                        { title: "怀表电源", detail: "怀表的电源在凌晨3点整被**短暂切断**过。", access: "public" }
                    ]
                },
                truth: "真凶是**同伴·李强**。\n\n**动机：** 对死者的怨恨和慢性投毒被发现的风险。\n\n**手法：** 李强利用密室锁芯对低温敏感的特性（线索 2-1），用**液氮**（线索 1-2）冻结锁芯。他用事先准备的**仿制钥匙**打开包厢，将死者勒毙。怀表停滞（线索 2-2）是干扰项，旨在将焦点引向其他乘客。真正的密室手法是**低温收缩锁芯**。"
            },
            "17": {
                title: "迷雾中的别墅", tags: "【推理】【复仇】【经典】", description: "在一栋被浓雾笼罩的别墅里，一位富豪被发现在书房内死亡。",
                roles: {
                    "管家·李福": { identity: "私人管家", secret: "我偷取了死者的一笔巨款，正准备逃离别墅。", task: "将死者死因引向意外触电。" , memoir: "【专属回忆】我记得死者有一个习惯，他会在睡前将房间里的**所有电源都断开**。我在案发后不久进入房间，发现房间里的**电线**有被**割断**的痕迹。" },
                    "女仆·小红": { identity: "别墅女仆", secret: "我偷偷给死者的食物中下了**慢性毒药**，想让他慢慢死去。", task: "隐瞒我投毒的事实。" , memoir: "【专属回忆】我记得别墅的**备用钥匙**被我藏在了花园的**花盆**里。我曾看到死者的房间里有一根**细长的鱼骨**。" },
                    "律师·王海": { identity: "遗嘱执行人", secret: "我被死者威胁，他掌握着我贪污遗产的证据。", task: "将焦点引向死者的仇人。", memoir: "【专属回忆】我记得浓雾期间，书房里的**气压**曾出现**短暂的下降**。我曾看到管家在花园里似乎在找什么东西。" },
                    "医生·赵莉": { identity: "私人医生", secret: "我偷偷给死者的药物中加入了**强效麻醉剂**，想让他昏迷。", task: "将焦点引向女仆。", memoir: "【专属回忆】我记得死者的书房窗户被**木板钉死**，但木板上的钉子似乎是**新钉上去**的。我曾看到死者的**房间钥匙**被一个**穿着潜水服的人**拿走。" }
                },
                scenes: [
                    { type: 'narrative', text: "【旁白】迷雾中的别墅，一起毒杀案。"},
                    { type: 'select_role' },
                    { type: 'narrative', text: "【旁白】**第一轮讨论。** 重点：死因是药还是食物？"},
                    { type: 'clues_stage', stage: 1 },
                    { type: 'narrative', text: "【旁白】**第二轮讨论。** 慢性中毒与急性死亡的矛盾，找出致命一击。"},
                    { type: 'clues_stage', stage: 2 },
                    { type: 'select_accusation' }, 
                    { type: 'reveal' }
                ],
                clue_stages: {
                    1: [
                        { title: "尸检报告", detail: "死者死于急性高钾血症。血液中有长期服用过量镇静剂的痕迹。", access: "public" }, 
                        { title: "药片对比", detail: "药瓶中混入了白色药片，成分是纯度极高的**氯化钾**。", access: "医生·赵莉" },
                        { title: "便条内容", detail: "便条上写着：“药片颜色的变化”和“注意果汁”。", access: "女仆·小红" },
                        { title: "白色粉末袋", detail: "管家身上发现的粉末袋中含有碾碎的氯化钾。", access: "管家·李福" },
                        { title: "空果汁瓶", detail: "在女仆的储物柜找到的空果汁瓶，残留物检测显示有微量氯化钾痕迹。", access: "女仆·小红" }
                    ],
                    2: [
                        { title: "医生证词", detail: "医生·赵莉证明管家·李福曾咨询过长期服用镇静剂对心脏的副作用。", access: "public" },
                        { title: "购买记录", detail: "医生·赵莉最近曾以“实验研究”的名义，高价购买过高纯度氯化钾。", access: "public" }
                    ]
                },
                truth: "真凶是**医生·赵莉**。\n\n**动机：** 对死者的怨恨和慢性投毒被发现的风险。\n\n**手法：** 管家·李福确实篡改了药物（慢性伤害）。但真正的杀人者是医生·赵莉。她利用了管家的行为作掩护（药片颜色的变化）。医生将高纯度的**氯化钾**（急性毒药）混入**备用果汁瓶**中（线索 1-5），并在晚餐前偷偷替换或倒入了死者的果汁中。她购买高纯度氯化钾（线索 2-2）是致命证据。管家携带的氯化钾只是他自己的慢性毒药，剂量不足以致死，是完美的干扰。"
            },
            "18": {
                title: "死亡的契约", tags: "【悬疑】【心理】【现代】", description: "一位知名作家在自己的书房内死亡，他死前曾签署了一份**死亡契约**。",
                roles: {
                    "编辑·李明": { identity: "私人编辑", secret: "我偷取了死者的未发表手稿，正准备将其出售。", task: "将焦点引向死者的妻子。", memoir: "【专属回忆】我记得书房的**通风管道**非常宽大，理论上可以容纳一个人通过。死者在死前曾告诉我，他在**契约**上留了一个**微小的符号**。" },
                    "妻子·赵莉": { identity: "全职太太", secret: "我偷偷给死者的食物中下了**慢性毒药**，想让他慢慢死去。", task: "隐瞒我投毒的事实。", memoir: "【专属回忆】我记得书房的钥匙只有死者和我拥有。我清楚地知道，那把钥匙的锁芯是用一种**低温合金**制作的，它对温度非常敏感。我曾看到死者的**房间钥匙**掉在地上。" },
                    "律师·王海": { identity: "法律顾问", secret: "我被死者威胁，他掌握着我贪污遗产的证据。", task: "将焦点引向死者的仇人。", memoir: "【专属回忆】我记得浓雾期间，书房里的**气压**曾出现**短暂的下降**。我曾看到编辑在书房里似乎在找什么东西。" },
                    "私家侦探·赵军": { identity: "受雇调查员", secret: "我发现死者生前一直在服用一种**解毒剂**，以抵抗某人对他的慢性投毒。", task: "找到那把真正的备用钥匙。", memoir: "【专属回忆】我记得书房的锁孔周围有**被低温冻结**的痕迹，非常细微。我曾看到死者的**怀表**停在了凌晨3点。" }
                },
                scenes: [
                    { type: 'narrative', text: "【旁白】死亡契约，书房内的谋杀。"},
                    { type: 'select_role' },
                    { type: 'narrative', text: "【旁白】**第一轮讨论。** 重点：契约是自杀还是他杀的伪装？"},
                    { type: 'clues_stage', stage: 1 },
                    { type: 'narrative', text: "【旁白】**第二轮讨论。** 找出密室的真正手法和毒药的来源。"},
                    { type: 'clues_stage', stage: 2 },
                    { type: 'select_accusation' }, 
                    { type: 'reveal' }
                ],
                clue_stages: {
                    1: [
                        { title: "尸检报告", detail: "死者死于急性神经毒素中毒，胃部残留有慢性解毒剂。", access: "public" }, 
                        { title: "低温痕迹", detail: "书房锁孔附近检测到微量的**液氮**残留痕迹。", access: "私家侦探·赵军" },
                        { title: "慢性毒药", detail: "在死者的食物中检测出慢性毒药残留。", access: "妻子·赵莉" },
                        { title: "契约符号", detail: "契约上有一个与编辑的名牌相似的符号。", access: "编辑·李明" },
                        { title: "怀表停滞", detail: "死者的怀表停在了凌晨3点整。", access: "律师·王海" }
                    ],
                    2: [
                        { title: "低温钥匙锁芯", detail: "书房钥匙的锁芯被低温冻结后，会短暂收缩，使得任何一把相似的钥匙都能打开。", access: "public" },
                        { title: "怀表电源", detail: "怀表的电源在凌晨3点整被**短暂切断**过。", access: "public" }
                    ]
                },
                truth: "真凶是**编辑·李明**。\n\n**动机：** 盗取未发表手稿并掩盖罪行。\n\n**手法：** 李明利用密室锁芯对低温敏感的特性（线索 2-1），用**液氮**（线索 1-2）冻结锁芯。他用事先准备的**仿制钥匙**打开书房，将死者毒杀。契约上的符号是李明故意留下的干扰项，旨在将焦点引向妻子。怀表停滞（线索 2-2）是干扰项，旨在将焦点引向其他乘客。真正的密室手法是**低温收缩锁芯**。"
            },
            "19": {
                title: "星空下的谋杀", tags: "【天文】【密文】【情感】", description: "一位著名的天文学家在自己的天文台内死亡，他死前曾试图发送一个**加密信息**。",
                roles: {
                    "学生·李明": { identity: "天文学徒", secret: "我偷取了死者的核心研究数据，并试图将其出售给竞争对手。", task: "将死者死因引向意外触电。" , memoir: "【专属回忆】我记得天文台的**通风口**非常宽大，理论上可以容纳一个人通过。死者在死前曾告诉我，他在**加密信息**上留了一个**微小的符号**。" },
                    "妻子·赵莉": { identity: "全职太太", secret: "我偷偷给死者的食物中下了**慢性毒药**，想让他慢慢死去。", task: "隐瞒我投毒的事实。", memoir: "【专属回忆】我记得天文台的钥匙只有死者和我拥有。我清楚地知道，那把钥匙的锁芯是用一种**低温合金**制作的，它对温度非常敏感。我曾看到死者的**房间钥匙**掉在地上。" },
                    "竞争对手·王海": { identity: "另一位天文学家", secret: "我被死者威胁，他掌握着我贪污研究资金的证据。", task: "将焦点引向死者的仇人。", memoir: "【专属回忆】我记得浓雾期间，天文台里的**气压**曾出现**短暂的下降**。我曾看到学生在天文台里似乎在找什么东西。" },
                    "记者·赵军": { identity: "调查记者", secret: "我偷偷在天文台里安装了一个**微型摄像头**，记录了死者死亡时的**两段不同的对话**。", task: "找到摄像头，并避免其暴露。", memoir: "【专属回忆】我记得天文台的锁孔周围有**被低温冻结**的痕迹，非常细微。我曾看到死者的**怀表**停在了凌晨3点。" }
                },
                scenes: [
                    { type: 'narrative', text: "【旁白】天文台，加密信息下的谋杀。"},
                    { type: 'select_role' },
                    { type: 'narrative', text: "【旁白】**第一轮讨论。** 重点：加密信息是凶手还是证物？"},
                    { type: 'clues_stage', stage: 1 },
                    { type: 'narrative', text: "【旁白】**第二轮讨论。** 找出密室的真正手法和毒药的来源。"},
                    { type: 'clues_stage', stage: 2 },
                    { type: 'select_accusation' }, 
                    { type: 'reveal' }
                ],
                clue_stages: {
                    1: [
                        { title: "尸检报告", detail: "死者死于急性高钾血症。血液中含有长期服用过量镇静剂的痕迹。", access: "public" }, 
                        { title: "低温痕迹", detail: "天文台锁孔附近检测到微量的**液氮**残留痕迹。", access: "记者·赵军" },
                        { title: "慢性毒药", detail: "在死者的食物中检测出慢性毒药残留。", access: "妻子·赵莉" },
                        { title: "加密信息", detail: "加密信息上有一个与学生的名牌相似的符号。", access: "学生·李明" },
                        { title: "怀表停滞", detail: "死者的怀表停在了凌晨3点整。", access: "竞争对手·王海" }
                    ],
                    2: [
                        { title: "低温钥匙锁芯", detail: "天文台钥匙的锁芯被低温冻结后，会短暂收缩，使得任何一把相似的钥匙都能打开。", access: "public" },
                        { title: "怀表电源", detail: "怀表的电源在凌晨3点整被**短暂切断**过。", access: "public" }
                    ]
                },
                truth: "真凶是**学生·李明**。\n\n**动机：** 盗取核心研究数据。\n\n**手法：** 李明利用密室锁芯对低温敏感的特性（线索 2-1），用**液氮**（线索 1-2）冻结锁芯。他用事先准备的**仿制钥匙**打开天文台，将死者毒杀。加密信息是李明故意留下的干扰项，旨在将焦点引向妻子。怀表停滞（线索 2-2）是干扰项，旨在将焦点引向其他乘客。真正的密室手法是**低温收缩锁芯**。"
            },
            "20": {
                title: "失控的列车", tags: "【交通】【密室】【高科技】", description: "在一列无人驾驶的列车上，一位工程师被发现在反锁的驾驶舱内死亡。",
                roles: {
                    "技术总监·李明": { identity: "列车技术总监", secret: "我偷取了列车的核心控制系统，并试图将其出售给竞争对手。", task: "将死者死因引向意外触电。" , memoir: "【专属回忆】我记得驾驶舱的**通风口**非常宽大，理论上可以容纳一个人通过。死者在死前曾告诉我，他在**密码**上留了一个**微小的符号**。" },
                    "工程师·赵莉": { identity: "列车工程师", secret: "我偷偷给死者的食物中下了**慢性毒药**，想让他慢慢死去。", task: "隐瞒我投毒的事实。", memoir: "【专属回忆】我记得驾驶舱的钥匙只有死者和我拥有。我清楚地知道，那把钥匙的锁芯是用一种**低温合金**制作的，它对温度非常敏感。我曾看到死者的**房间钥匙**掉在地上。" },
                    "保安队长·王海": { identity: "列车保安队长", secret: "我被死者威胁，他掌握着我贪污列车资金的证据。", task: "将焦点引向死者的仇人。", memoir: "【专属回忆】我记得列车停滞期间，驾驶舱里的**气压**曾出现**短暂的下降**。我曾看到技术总监在驾驶舱里似乎在找什么东西。" },
                    "记者·赵军": { identity: "调查记者", secret: "我偷偷在驾驶舱安装了一个**微型摄像头**，记录了死者死亡时的**两段不同的对话**。", task: "找到摄像头，并避免其暴露。", memoir: "【专属回忆】我记得驾驶舱的锁孔周围有**被低温冻结**的痕迹，非常细微。我曾看到死者的**怀表**停在了凌晨3点。" }
                },
                scenes: [
                    { type: 'narrative', text: "【旁白】失控列车，驾驶舱内的谋杀。"},
                    { type: 'select_role' },
                    { type: 'narrative', text: "【旁白】**第一轮讨论。** 重点：密室是如何形成的？"},
                    { type: 'clues_stage', stage: 1 },
                    { type: 'narrative', text: "【旁白】**第二轮讨论。** 找出关键工具和凶手离开密室的手段。"},
                    { type: 'clues_stage', stage: 2 },
                    { type: 'select_accusation' }, 
                    { type: 'reveal' }
                ],
                clue_stages: {
                    1: [
                        { title: "尸检报告", detail: "死者死于**窒息**，颈部有勒痕。血液中含有慢性毒药残留。", access: "public" }, 
                        { title: "低温痕迹", detail: "驾驶舱锁孔附近检测到微量的**液氮**残留痕迹。", access: "记者·赵军" },
                        { title: "慢性毒药", detail: "在死者的食物中检测出慢性毒药残留。", access: "工程师·赵莉" },
                        { title: "密码符号", detail: "密码上有一个与技术总监的名牌相似的符号。", access: "技术总监·李明" },
                        { title: "怀表停滞", detail: "死者的怀表停在了凌晨3点整。", access: "保安队长·王海" }
                    ],
                    2: [
                        { title: "低温钥匙锁芯", detail: "驾驶舱钥匙的锁芯被低温冻结后，会短暂收缩，使得任何一把相似的钥匙都能打开。", access: "public" },
                        { title: "怀表电源", detail: "怀表的电源在凌晨3点整被**短暂切断**过。", access: "public" }
                    ]
                },
                truth: "真凶是**技术总监·李明**。\n\n**动机：** 盗取核心控制系统并掩盖罪行。\n\n**手法：** 李明利用密室锁芯对低温敏感的特性（线索 2-1），用**液氮**（线索 1-2）冻结锁芯。他用事先准备的**仿制钥匙**打开驾驶舱，将死者勒毙。密码符号是李明故意留下的干扰项，旨在将焦点引向工程师。怀表停滞（线索 2-2）是干扰项，旨在将焦点引向其他乘客。真正的密室手法是**低温收缩锁芯**。"
            }
        };


        // ===================================================================
        // 2. 核心功能函数 (Functions) - 保持原文件逻辑不动，仅做适配
        // ===================================================================
        
        // TTS 功能 (Web Speech API)
        const synth = window.speechSynthesis;
        let chineseVoice = null;
        let selectedRoleLocked = false;
        
        function getChineseVoice() {
            // 确保 voice 列表已加载
            if (synth.getVoices().length === 0) {
                synth.onvoiceschanged = getChineseVoice;
                return;
            }

            if (chineseVoice) return chineseVoice;
            const voices = synth.getVoices();
            
            // 1. 尝试查找特定优质中文女声 (zh-CN)
            let preferredVoice = voices.find(voice => 
                voice.lang.startsWith('zh-') && (
                    voice.name.includes('Ting-Ting') || 
                    voice.name.includes('Tingting') || 
                    voice.name.includes('Mei-Jia') || 
                    voice.name.includes('Natural') || 
                    voice.name.includes('Female')
                )
            );

            // 2. 如果找不到特定优质声音，则查找所有中文女声
            if (!preferredVoice) {
                preferredVoice = voices.find(voice => 
                    voice.lang.startsWith('zh-') && !voice.name.includes('Male')
                );
            }
            
            // 3. 如果找不到女性声音，则退而求其次
            if (!preferredVoice) {
                preferredVoice = voices.find(voice => 
                    voice.lang === 'zh-CN' || 
                    voice.name.includes('Mandarin') || 
                    voice.name.includes('普通话') 
                );
            }

            // 4. 最后回退到第一个语音
            if (!preferredVoice) {
                preferredVoice = voices[0]; 
            }
            
            chineseVoice = preferredVoice;
            return chineseVoice;
        }

        function speakNarrative(text) {
            if (!game.ttsOn || !synth) return; 

            if (synth.speaking) {
                synth.cancel();
            }

            // 清理文本中的【旁白/主持人】和 markdown ** 加粗标记
            const cleanText = text.replace(/【[^】]+】/g, '').replace(/\*\*([^*]+)\*\*/g, '$1');

            const utterance = new SpeechSynthesisUtterance(cleanText);
            utterance.voice = getChineseVoice(); 
            utterance.lang = 'zh-CN';
            utterance.rate = 1.0; 
            utterance.pitch = 1.0; 
            
            synth.speak(utterance);
        }
        
        function stopSpeaking() {
            if (synth.speaking) {
                synth.cancel();
            }
        }
        
        getChineseVoice();


        /**
         * 场景切换逻辑 (Scene Switching)
         */
        function goToScene(sceneId) {
            document.querySelectorAll('.scene').forEach(scene => {
                scene.classList.remove('active');
            });
            stopSpeaking(); 
            document.getElementById(sceneId).classList.add('active');
            
            if (sceneId === 'scene-case-select') {
                resetGame();
            }
            
            const constantRoleDisplay = document.getElementById('constant-role-display');
            const persistentWrapper = document.getElementById('persistent-ui-wrapper');
            
            const gameInProgress = (sceneId !== 'scene-case-select' && sceneId !== 'scene-role-select');
            
            if (game.roleName && gameInProgress) {
                 persistentWrapper.style.display = 'flex'; 
                 constantRoleDisplay.style.display = 'block'; 
            } else {
                 persistentWrapper.style.display = 'none'; 
            }
            
            if (sceneId === 'scene-narrative' || sceneId === 'scene-clues' || sceneId === 'scene-reveal' || sceneId === 'scene-select-accusation') {
                loadNotes();
            }
        }


        /**
         * 加载并显示当前剧本中的场景内容
         */
        function loadScene(currentCaseData) {
            const scenes = currentCaseData.scenes;
            if (game.currentSceneIndex >= scenes.length) {
                goToScene('scene-case-select');
                return;
            }
            
            const scene = scenes[game.currentSceneIndex];
            const sceneType = scene.type;

            const imageEl = document.getElementById('scene-main-image');
            // 使用占位符，因为实际图片可能需要从外部加载
            const defaultImageUrl = 'data:image/svg+xml;charset=UTF-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22100%25%22%20height%3D%22350%22%20viewBox%3D%220%200%20100%20350%22%20preserveAspectRatio%3D%22none%22%3E%3Crect%20width%3D%22100%25%22%20height%3D%22350%22%20fill%3D%22%231e1e1e%22%2F%3E%3Ctext%20x%3D%2250%25%22%20y%3D%2250%25%22%20fill%3D%22%23DAA520%22%20font-size%3D%2212%22%20font-family%3D%22Arial%2C%20sans-serif%22%20text-anchor%3D%22middle%22%3E%5B%E5%9C%BA%E6%99%AF%E6%8F%92%E5%9B%BE%E5%8D%A0%E4%BD%8D%E7%AC%A6%5D%3C%2Ftext%3E%3C%2Frect%3E%3C%2Fsvg%3E';
            if (imageEl) {
                const imageUrl = SCENE_IMAGES[game.currentCaseId] || defaultImageUrl;
                imageEl.src = imageUrl;
            }
            
            stopSpeaking(); 

            switch (sceneType) {
                case 'narrative':
                    goToScene('scene-narrative');
                    document.getElementById('narrative-text').innerHTML = scene.text.replace(/\n/g, '<br>');
                    speakNarrative(scene.text); 
                    
                    document.getElementById('continue-story-btn').textContent = "继续故事 ▶";
                    document.getElementById('continue-story-btn').onclick = () => {
                        game.currentSceneIndex++;
                        loadScene(currentCaseData);
                    };
                    break;
                
                case 'select_role':
                    goToScene('scene-role-select');
                    const roleNames = Object.keys(currentCaseData.roles).join(', ');
                    document.getElementById('role-name-options').textContent = `可输入角色名: ${roleNames}`;
                    document.getElementById('role-name-input').value = '';
                    document.getElementById('role-script-display').innerHTML = '';
                    document.getElementById('confirm-role-btn').textContent = "确认";
                    
                    speakNarrative("请各位玩家确认自己的角色剧本，输入你的角色全名。");
                    break;

                case 'clues_stage':
                    goToScene('scene-clues');
                    game.currentClueStage = scene.stage;
                    loadClues(currentCaseData.clue_stages[game.currentClueStage]);
                    
                    speakNarrative(`第${game.currentClueStage}轮搜证开始。本次搜证有${currentCaseData.clue_stages[game.currentClueStage].length}条线索。`);
                    break;
                    
                // 新增场景处理逻辑：最终指认列表
                case 'select_accusation':
                    goToScene('scene-select-accusation');
                    renderAccusationRoles(currentCaseData.roles);
                    speakNarrative("现在是最终指认环节，请大家给出最终指认。");
                    
                    document.getElementById('confirm-accusation-btn').onclick = () => {
                        game.currentSceneIndex++;
                        loadScene(currentCaseData);
                    };
                    break;
                    
                case 'reveal':
                    goToScene('scene-reveal');
                    document.getElementById('truth-display').textContent = currentCaseData.truth;
                    // 移除指认列表渲染
                    speakNarrative("真相揭晓环节。");
                    break;

                default:
                    game.currentSceneIndex++;
                    loadScene(currentCaseData);
            }
        }

        /**
         * FIX 2 辅助函数: 渲染最终指认的角色列表
         */
        function renderAccusationRoles(roles) {
            const container = document.getElementById('role-list-for-accusation');
            if (!container) return;
            container.innerHTML = '';

            Object.keys(roles).forEach(roleName => {
                const btn = document.createElement('button');
                btn.className = 'menu-btn'; 
                // 设置样式，使其更突出，作为指认目标
                btn.style.backgroundColor = 'var(--color-danger)';
                btn.style.color = 'white';
                btn.style.border = '1px solid var(--color-danger)';
                btn.style.marginTop = '0';
                btn.style.flexShrink = '0'; // 防止按钮被压缩
                
                btn.textContent = roleName;
                btn.title = `指认 ${roleName}`;
                container.appendChild(btn);
            });
        }

        /**
         * 加载线索列表 (包含 FIX 1 专属线索权限检查)
         */
        function loadClues(clues) {
            const container = document.getElementById('clue-list-container');
            container.innerHTML = '';
            
            const totalClues = clues.length;
            const shownClues = clues.filter(c => !c.access || c.access === 'public' || c.access === game.roleName).length;

            document.getElementById('clue-stage-info').textContent = `本次搜证有 ${totalClues} 条线索 (第 ${game.currentClueStage} 轮搜证)。`;

            clues.forEach((clue, index) => {
                const clueDiv = document.createElement('div');
                clueDiv.classList.add('clue-item');
                
                const isPrivate = clue.access && clue.access !== 'public';
                const isMyClue = isPrivate && clue.access === game.roleName;

                if (isPrivate && !isMyClue) {
                    // FIX 1: 隐藏不属于当前玩家的专属线索内容
                    clueDiv.innerHTML = `
                        <h3><span style="color:red">[${clue.access} 专属]</span> 🔒 **此线索为 ${clue.access} 专属，你无权查看。**</h3>
                        <p style="color:var(--color-text-secondary); font-style:italic;">（请向 ${clue.access} 玩家询问）</p>
                    `;
                } else {
                    // 显示公共线索 或 玩家自己的专属线索
                    const accessTag = isPrivate ? `<span style="color:red">[${clue.access} 专属]</span>` : `[公共]`;
                    clueDiv.innerHTML = `<h3>${accessTag} ${clue.title}</h3><p>${clue.detail}</p>`;
                }
                
                container.appendChild(clueDiv);
            });

            document.getElementById('finish-clues-btn').onclick = () => {
                game.currentSceneIndex++;
                loadScene(game.currentCaseData);
            };
        }


        /**
         * 重置游戏状态
         */
        function resetGame() {
            game.currentCaseId = null;
            game.currentCaseData = null;
            game.currentSceneIndex = 0;
            game.roleName = null;
            game.currentClueStage = 1;
            selectedRoleLocked = false;
            document.getElementById('role-script-display').innerHTML = '';
            stopSpeaking(); 
            
            document.getElementById('persistent-ui-wrapper').style.display = 'none'; 
        }

        // ===================================================================
        // 3. 推理笔记功能 (Notes Functionality)
        // ===================================================================
        const NOTES_STORAGE_KEY = 'detective_notes';
        
        function saveNotes() {
            const textarea = document.getElementById('note-textarea');
            if (textarea) {
                const storageKey = game.currentCaseId ? `${NOTES_STORAGE_KEY}_${game.currentCaseId}` : NOTES_STORAGE_KEY;
                localStorage.setItem(storageKey, textarea.value);
            }
        }

        function loadNotes() {
            const storageKey = game.currentCaseId ? `${NOTES_STORAGE_KEY}_${game.currentCaseId}` : NOTES_STORAGE_KEY;
            const savedNotes = localStorage.getItem(storageKey) || '';
            const textarea = document.getElementById('note-textarea');

            if (textarea) {
                textarea.value = savedNotes;
                textarea.oninput = saveNotes; 
            }
        }
        
        function toggleNotes(containerId) {
            const container = document.getElementById(containerId);
            container.classList.toggle('collapsed');
        }


        // ===================================================================
        // 4. 事件监听器和初始化
        // ===================================================================

        // 初始化案件列表
        function renderCaseList() {
            const container = document.getElementById('case-list-container');
            container.innerHTML = '';
            
            Object.keys(GAME_DATA).sort().forEach(caseId => {
                const data = GAME_DATA[caseId];
                if (!data) return;

                const card = document.createElement('div');
                card.classList.add('case-card');
                card.setAttribute('data-case-id', caseId);

                card.innerHTML = `
                    <h2>案件 ${caseId}: ${data.title}</h2>
                    <p class="case-tags">${data.tags}</p>
                    <p>${data.description}</p>
                    <button class="confirm-button" style="width:100%;">开始案件</button>
                `;

                // 使用闭包确保 caseId 正确传递
                card.onclick = (function(id) {
                    return function() {
                        startGame(id);
                    };
                })(caseId);
                
                container.appendChild(card);
            });
        }
        
        // 启动游戏
        function startGame(caseId) {
            game.currentCaseId = caseId;
            if (selectedRoleLocked) {
                alert(`角色已锁定 (${game.roleName})，无法切换案件！`);
                return;
            }
            game.currentCaseData = GAME_DATA[caseId];
            game.currentSceneIndex = 0;
            loadNotes();
            loadScene(game.currentCaseData);
        }
        
        // 常驻角色卡片设置
        function setConstantRoleDisplay(roleData, roleName) {
            const roleNameHtml = `<strong>角色:</strong> ${roleName} (${roleData.identity})`;
            // 确保常驻卡片只显示角色名、秘密和任务，不显示专属回忆 (memoir)
            const secretHtml = `<strong>秘密:</strong> ${roleData.secret}`; 
            const taskHtml = `<strong>任务:</strong> ${roleData.task}`;
            
            document.getElementById('constant-role-name').innerHTML = roleNameHtml;
            document.getElementById('constant-role-secret').innerHTML = secretHtml;
            document.getElementById('constant-role-task').innerHTML = taskHtml;
        }


        // 角色确认按钮逻辑
        document.getElementById('confirm-role-btn').onclick = () => {
            const inputName = document.getElementById('role-name-input').value.trim();
            if (!inputName) {
                alert('请输入您的角色名！');
                return;
            }
            const roles = game.currentCaseData.roles;
            const normalizedInput = inputName.toLowerCase();
            
            // 模糊匹配角色名
            const matchingRoleName = Object.keys(roles).find(
                key => key.toLowerCase() === normalizedInput || key.toLowerCase().includes(normalizedInput)
            );

            if (matchingRoleName) {
                game.roleName = matchingRoleName;
                selectedRoleLocked = true;
                const roleData = roles[matchingRoleName];
                
                const displayArea = document.getElementById('role-script-display');
                
                // 设置常驻卡片内容
                setConstantRoleDisplay(roleData, matchingRoleName);
                
                // 显示常驻卡片
                document.getElementById('constant-role-display').style.display = 'block';

                // 增加专属回忆的显示
                let scriptHtml = `
                    <h2>你好，${matchingRoleName}。这是你的剧本:</h2>
                    <p><strong>【你的身份】</strong> <span>${roleData.identity}</span></p>
                    <p><strong>【你的秘密】</strong> <span>${roleData.secret}</span></p>
                    <p><strong>【你的任务】</strong> <span>${roleData.task}</span></p>
                `;
                
                if (roleData.memoir) {
                     scriptHtml += `<p style="color:var(--color-accent);"><strong>${roleData.memoir}</strong></p>`;
                }
                
                scriptHtml += `<button class="action-btn" id="read-done-btn">已阅读，进入故事</button>`;

                displayArea.innerHTML = scriptHtml;
                
                speakNarrative(`你好，${matchingRoleName}。你的身份是${roleData.identity}。你的秘密是${roleData.secret}。你的任务是${roleData.task}。`);

                document.getElementById('read-done-btn').onclick = () => {
                    stopSpeaking(); 
                    game.currentSceneIndex++;
                    loadScene(game.currentCaseData);
                };

            } else {
                alert(`角色名输入错误，请检查。请确保输入的是以下角色之一：${Object.keys(roles).join('、')}`);
            }
        };
        
        // TTS 切换逻辑
        document.getElementById('tts-toggle').onclick = function() {
            if (game.ttsOn) {
                stopSpeaking(); 
                game.ttsOn = false;
                this.textContent = "🔊 TTS: 关";
                this.classList.remove('tts-on');
            } else {
                game.ttsOn = true;
                this.textContent = "🔊 TTS: 开";
                this.classList.add('tts-on');
                
                if (!synth) {
                    alert("警告：当前浏览器不支持 TTS（Web Speech API）。");
                } else {
                    const narrativeEl = document.getElementById('narrative-text');
                    if (narrativeEl && narrativeEl.closest('.scene').classList.contains('active')) {
                        speakNarrative(narrativeEl.textContent);
                    }
                }
            }
        };

        function bindNotesEvents() {
            const notesHeader = document.getElementById('notes-header'); 

            if (notesHeader) {
                notesHeader.onclick = () => toggleNotes('notes-container');
            }
            
            loadNotes(); 
        }

        const menuModal = document.getElementById('menu-modal');
        document.getElementById('menu-btn').onclick = () => {
            menuModal.style.display = "block";
        };
        document.getElementById('close-menu').onclick = () => {
            menuModal.style.display = "none";
        };
        window.onclick = (event) => {
            if (event.target == menuModal) {
                menuModal.style.display = "none";
            }
        };

        // 页面加载完成时渲染案件列表和绑定笔记事件
        window.onload = () => {
            renderCaseList();
            bindNotesEvents(); 
            document.getElementById('persistent-ui-wrapper').style.display = 'none';
        };

    </script>
</body>
</html>